<!DOCTYPE html><html lang="en" class="" style="scroll-padding:60px"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Masked Arrays - Numpy Tutorials</title><meta property="og:title" content="Masked Arrays - Numpy Tutorials"/><meta name="generator" content="mystmd"/><meta name="keywords" content=""/><meta name="image" content="/numpy-tutorials/build/b77199e99a54e59b2e3c037c2cc90f21.svg"/><meta property="og:image" content="/numpy-tutorials/build/b77199e99a54e59b2e3c037c2cc90f21.svg"/><link rel="stylesheet" href="/numpy-tutorials/build/_assets/app-MOQGDXHO.css"/><link rel="stylesheet" href="/numpy-tutorials/build/_assets/thebe-core-VKVHG5VY.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jupyter-matplotlib@0.11.3/css/mpl_widget.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css" integrity="sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ" crossorigin="anonymous"/><link rel="icon" href="/numpy-tutorials/favicon.ico"/><link rel="stylesheet" href="/numpy-tutorials/myst-theme.css"/><script>
  const savedTheme = localStorage.getItem("myst:theme");
  const theme = window.matchMedia("(prefers-color-scheme: light)").matches ? 'light' : 'dark';
  const classes = document.documentElement.classList;
  const hasAnyTheme = classes.contains('light') || classes.contains('dark');
  if (!hasAnyTheme) classes.add(savedTheme ?? theme);
</script></head><body class="m-0 transition-colors duration-500 bg-white dark:bg-stone-900"><div class="myst-skip-to-article fixed top-1 left-1 h-[0px] w-[0px] focus-within:z-40 focus-within:h-auto focus-within:w-auto bg-white overflow-hidden focus-within:p-2 focus-within:ring-1" aria-label="skip to content options"><a href="#skip-to-frontmatter" class="myst-skip-to-link block px-2 py-1 text-black underline">Skip to article frontmatter</a><a href="#skip-to-article" class="myst-skip-to-link block px-2 py-1 text-black underline">Skip to article content</a></div><dialog id="myst-no-css" style="position:fixed;left:0px;top:0px;width:100vw;height:100vh;font-size:4rem;padding:1rem;color:black;background:white"><strong>Site not loading correctly?</strong><p>This may be due to an incorrect <code>BASE_URL</code> configuration. See<!-- --> <a href="https://mystmd.org/guide/deployment#deploy-base-url">the MyST Documentation</a> <!-- -->for reference.</p><script>
    (() => {
            // Test for has-styling variable set by the MyST stylesheet
            const node = document.currentScript.parentNode;
            const hasCSS = window.getComputedStyle(node).getPropertyValue("--has-styling");
            if (hasCSS === ""){
                    node.showModal();
            }

    })()
</script></dialog><div class="myst-top-nav bg-white/80 backdrop-blur dark:bg-stone-900/80 shadow dark:shadow-stone-700 p-3 md:px-8 sticky w-screen top-0 z-30 h-[60px]"><nav class="myst-top-nav-bar flex items-center justify-between flex-nowrap max-w-[1440px] mx-auto"><div class="flex flex-row xl:min-w-[19.5rem] mr-2 sm:mr-7 justify-start items-center shrink-0"><div class="block xl:hidden"><button class="myst-top-nav-menu-button flex items-center justify-center border-stone-400 text-stone-800 hover:text-stone-900 dark:text-stone-200 hover:dark:text-stone-100 w-10 h-10"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" width="1.5rem" height="1.5rem"><path fill-rule="evenodd" d="M3 6.75A.75.75 0 0 1 3.75 6h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 6.75ZM3 12a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 12Zm0 5.25a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75a.75.75 0 0 1-.75-.75Z" clip-rule="evenodd"></path></svg><span class="sr-only">Open Menu</span></button></div><a class="myst-home-link flex items-center ml-3 dark:text-white w-fit md:ml-5 xl:ml-7" href="/numpy-tutorials/"><div class="myst-home-link-logo mr-3 flex items-center dark:bg-white dark:rounded px-1"><img src="/numpy-tutorials/build/numpylogo-278cf34e28ed8e84d4b79121bf103557.svg" class="h-9" height="2.25rem"/></div><span class="text-md sm:text-xl tracking-tight sm:mr-5 sr-only">Made with MyST</span></a></div><div class="flex items-center flex-grow w-auto"><div class="flex-grow hidden text-md lg:block"></div><div class="flex-grow block"></div><button type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:R75cp:" data-state="closed" class="myst-search-bar flex items-center h-10 aspect-square sm:w-64 text-left text-gray-600 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 myst-search-bar-disabled hover:ring-blue-500 dark:hover:ring-blue-500 hover:border-blue-500 dark:hover:border-blue-500"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="p-2.5 h-10 w-10 aspect-square"><path fill-rule="evenodd" d="M10.5 3.75a6.75 6.75 0 1 0 0 13.5 6.75 6.75 0 0 0 0-13.5ZM2.25 10.5a8.25 8.25 0 1 1 14.59 5.28l4.69 4.69a.75.75 0 1 1-1.06 1.06l-4.69-4.69A8.25 8.25 0 0 1 2.25 10.5Z" clip-rule="evenodd"></path></svg><span class="myst-search-text-placeholder hidden sm:block grow">Search</span><div aria-hidden="true" class="myst-search-shortcut items-center hidden mx-1 font-mono text-sm text-gray-600 dark:text-gray-300 sm:flex gap-x-1"><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none hide-mac">CTRL</kbd><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none show-mac">⌘</kbd><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none ">K</kbd><script>
;(() => {
const script = document.currentScript;
const root = script.parentElement;

const isMac = /mac/i.test(
      window.navigator.userAgentData?.platform ?? window.navigator.userAgent,
    );
root.querySelectorAll(".hide-mac").forEach(node => {node.classList.add(isMac ? "hidden" : "block")});
root.querySelectorAll(".show-mac").forEach(node => {node.classList.add(!isMac ? "hidden" : "block")});
})()</script></div></button><button class="myst-theme-button theme rounded-full aspect-square border border-stone-700 dark:border-white hover:bg-neutral-100 border-solid overflow-hidden text-stone-700 dark:text-white hover:text-stone-500 dark:hover:text-neutral-800 w-10 h-10 mx-3" title="Toggle theme between light and dark mode" aria-label="Toggle theme between light and dark mode"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="myst-theme-moon-icon h-full w-full p-0.5 hidden dark:block"><path fill-rule="evenodd" d="M9.528 1.718a.75.75 0 0 1 .162.819A8.97 8.97 0 0 0 9 6a9 9 0 0 0 9 9 8.97 8.97 0 0 0 3.463-.69.75.75 0 0 1 .981.98 10.503 10.503 0 0 1-9.694 6.46c-5.799 0-10.5-4.7-10.5-10.5 0-4.368 2.667-8.112 6.46-9.694a.75.75 0 0 1 .818.162Z" clip-rule="evenodd"></path></svg><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="myst-theme-sun-icon h-full w-full p-0.5 dark:hidden"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"></path></svg></button><div class="block sm:hidden"></div><div class="hidden sm:block"></div></div></nav></div><div class="myst-primary-sidebar fixed xl:article-grid grid-gap xl:w-screen xl:pointer-events-none overflow-auto max-xl:min-w-[300px] hidden z-10" style="top:60px"><div class="myst-primary-sidebar-pointer pointer-events-auto xl:col-margin-left flex-col overflow-hidden hidden xl:flex"><div class="myst-primary-sidebar-nav flex-grow py-6 overflow-y-auto primary-scrollbar"><nav aria-label="Navigation" class="myst-primary-sidebar-topnav overflow-y-hidden transition-opacity ml-3 xl:ml-0 mr-3 max-w-[350px] lg:hidden"><div class="w-full px-1 dark:text-white font-medium"></div></nav><div class="my-3 border-b-2 lg:hidden"></div><nav aria-label="Table of Contents" class="myst-primary-sidebar-toc flex-grow overflow-y-hidden transition-opacity ml-3 xl:ml-0 mr-3 max-w-[350px]"><div class="myst-toc w-full px-1 dark:text-white"><a title="Numpy Tutorials" class="block break-words focus:outline outline-blue-200 outline-2 rounded myst-toc-item p-2 my-1 rounded-lg hover:bg-slate-300/30 font-bold" href="/numpy-tutorials/">Numpy Tutorials</a><div data-state="closed" class="w-full"><div class="myst-toc-item flex flex-row w-full gap-2 pl-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><div title="Applications" class="block break-words rounded py-2 grow cursor-pointer">Applications</div><button class="self-stretch flex items-center flex-none px-1 rounded-l-md group hover:bg-slate-300/30 focus-visible:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:Rmpsp:" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="closed" id="radix-:Rmpsp:" hidden="" class="pl-3 pr-[2px] collapsible-content"></div></div><div data-state="closed" class="w-full"><div class="myst-toc-item flex flex-row w-full gap-2 pl-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><div title="Features" class="block break-words rounded py-2 grow cursor-pointer">Features</div><button class="self-stretch flex items-center flex-none px-1 rounded-l-md group hover:bg-slate-300/30 focus-visible:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:Rupsp:" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="closed" id="radix-:Rupsp:" hidden="" class="pl-3 pr-[2px] collapsible-content"></div></div><div data-state="closed" class="w-full"><div class="myst-toc-item flex flex-row w-full gap-2 pl-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><a title="Contributing" class="block break-words focus:outline outline-blue-200 outline-2 rounded py-2 grow" href="/numpy-tutorials/contributing">Contributing</a><button class="self-stretch flex items-center flex-none px-1 rounded-l-md group hover:bg-slate-300/30 focus-visible:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:R16psp:" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="closed" id="radix-:R16psp:" hidden="" class="pl-3 pr-[2px] collapsible-content"></div></div></div></nav></div><div class="myst-primary-sidebar-footer flex-none py-6 transition-all duration-700 translate-y-6 opacity-0"><a class="myst-made-with-myst flex mx-auto text-gray-700 w-fit hover:text-blue-700 dark:text-gray-200 dark:hover:text-blue-400" href="https://mystmd.org/made-with-myst" target="_blank" rel="noreferrer"><svg style="width:24px;height:24px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" stroke="none"><g id="icon"><path fill="currentColor" d="M23.8,54.8v-3.6l4.7-0.8V17.5l-4.7-0.8V13H36l13.4,31.7h0.2l13-31.7h12.6v3.6l-4.7,0.8v32.9l4.7,0.8v3.6h-15
          v-3.6l4.9-0.8V20.8H65L51.4,53.3h-3.8l-14-32.5h-0.1l0.2,17.4v12.1l5,0.8v3.6H23.8z"></path><path fill="#F37726" d="M47,86.9c0-5.9-3.4-8.8-10.1-8.8h-8.4c-5.2,0-9.4-1.3-12.5-3.8c-3.1-2.5-5.4-6.2-6.8-11l4.8-1.6
          c1.8,5.6,6.4,8.6,13.8,8.8h9.2c6.4,0,10.8,2.5,13.1,7.5c2.3-5,6.7-7.5,13.1-7.5h8.4c7.8,0,12.7-2.9,14.6-8.7l4.8,1.6
          c-1.4,4.9-3.6,8.6-6.8,11.1c-3.1,2.5-7.3,3.7-12.4,3.8H63c-6.7,0-10,2.9-10,8.8"></path></g></svg><span class="self-center ml-2 text-sm">Made with MyST</span></a></div></div></div><main class="article-grid grid-gap"><article class="article-grid subgrid-gap col-screen article content"><div class="hidden"></div><div id="skip-to-frontmatter" aria-label="article frontmatter" class="myst-fm-block mb-8 pt-9"><div class="myst-fm-block-header flex items-center mb-5 h-6 text-sm font-light"><div class="flex-grow"></div><div class="myst-fm-block-badges"><a href="https://github.com/numpy/numpy-tutorials" title="GitHub Repository: numpy/numpy-tutorials" target="_blank" rel="noopener noreferrer" class="myst-fm-github-link text-inherit hover:text-inherit"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" width="1.25rem" height="1.25rem" class="myst-fm-github-icon inline-block mr-1 opacity-60 hover:opacity-100"><path d="M12 2.5c-5.4 0-9.8 4.4-9.8 9.7 0 4.3 2.8 8 6.7 9.2.5.1.7-.2.7-.5v-1.8c-2.4.5-3.1-.6-3.3-1.1-.1-.3-.6-1.1-1-1.4-.3-.2-.8-.6 0-.6s1.3.7 1.5 1c.9 1.5 2.3 1.1 2.8.8.1-.6.3-1.1.6-1.3-2.2-.2-4.4-1.1-4.4-4.8 0-1.1.4-1.9 1-2.6-.1-.2-.4-1.2.1-2.6 0 0 .8-.3 2.7 1 .8-.2 1.6-.3 2.4-.3.8 0 1.7.1 2.4.3 1.9-1.3 2.7-1 2.7-1 .5 1.3.2 2.3.1 2.6.6.7 1 1.5 1 2.6 0 3.7-2.3 4.6-4.4 4.8.4.3.7.9.7 1.8V21c0 .3.2.6.7.5 3.9-1.3 6.6-4.9 6.6-9.2 0-5.4-4.4-9.8-9.8-9.8z"></path></svg></a></div><a href="https://github.com/numpy/numpy-tutorials/edit/main/content/tutorial-ma.md" title="Edit This Page" target="_blank" rel="noopener noreferrer" class="myst-fm-edit-link text-inherit hover:text-inherit"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1.25rem" height="1.25rem" class="myst-fm-edit-icon inline-block mr-1 opacity-60 hover:opacity-100"><path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"></path></svg></a><div class="myst-fm-downloads-dropdown relative flex inline-block mx-1 grow-0" data-headlessui-state=""><button class="myst-fm-downloads-button relative ml-2 -mr-1" id="headlessui-menu-button-:Rs8ucp:" type="button" aria-haspopup="menu" aria-expanded="false" data-headlessui-state=""><span class="sr-only">Downloads</span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1.25rem" height="1.25rem" class="myst-fm-downloads-icon"><title>Download</title><path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"></path></svg></button></div></div><h1 class="myst-fm-block-title mb-0">Masked Arrays</h1><header class="myst-fm-authors-affiliations mt-4 not-prose"><div class="myst-fm-authors-list"><span class="myst-fm-author font-semibold text-sm myst-fm-author-item inline-block"><button class="myst-fm-author-popover focus:shadow-[0_0_0_2px] focus:shadow-black outline-none hover:underline" aria-label="Author Details" type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:R78ucp:" data-state="closed"><span class="myst-fm-author-name">Numpy Community</span></button></span></div></header></div><div class="block my-10 lg:sticky lg:z-10 lg:h-0 lg:pt-0 lg:my-0 lg:ml-10 lg:col-margin-right" style="top:60px"><nav></nav></div><div id="skip-to-article"></div><h2 id="what-youll-do" class="relative group"><span class="heading-text">What you’ll do</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#what-youll-do" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>Use the masked arrays module from NumPy to analyze COVID-19 data and deal with missing values.</p><h2 id="what-youll-learn" class="relative group"><span class="heading-text">What you’ll learn</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#what-youll-learn" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><ul><li><p>You’ll understand what are masked arrays and how they can be created</p></li><li><p>You’ll see how to access and modify data for masked arrays</p></li><li><p>You’ll be able to decide when the use of masked arrays is appropriate in some of your applications</p></li></ul><h2 id="what-youll-need" class="relative group"><span class="heading-text">What you’ll need</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#what-youll-need" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><ul><li><p>Basic familiarity with Python. If you would like to refresh your memory, take a look at the <a target="_blank" rel="noreferrer" href="https://docs.python.org/dev/tutorial/index.html" class="link">Python tutorial<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="link-icon"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"></path></svg></a>.</p></li><li><p>Basic familiarity with NumPy</p></li><li><p>To run the plots on your computer, you need <a target="_blank" rel="noreferrer" href="https://matplotlib.org" class="link">matplotlib<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="link-icon"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"></path></svg></a>.</p></li></ul><hr class="py-2 my-5 translate-y-2"/><h2 id="what-are-masked-arrays" class="relative group"><span class="heading-text">What are masked arrays?</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#what-are-masked-arrays" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>Consider the following problem. You have a dataset with missing or invalid entries. If you’re doing any kind of processing on this data, and want to <em>skip</em> or flag these unwanted entries without just deleting them, you may have to use conditionals or filter your data somehow. The <a target="_blank" rel="noreferrer" href="https://numpy.org/devdocs/reference/maskedarray.generic.html#module-numpy.ma" class="link">numpy.ma<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="link-icon"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"></path></svg></a> module provides some of the same functionality of <a target="_blank" rel="noreferrer" href="https://numpy.org/devdocs/reference/generated/numpy.ndarray.html#numpy.ndarray" class="link">NumPy ndarrays<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="link-icon"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"></path></svg></a> with added structure to ensure invalid entries are not used in computation.</p><p>From the <a target="_blank" rel="noreferrer" href="https://numpy.org/devdocs/reference/maskedarray.generic.html#module-numpy.ma" class="link">Reference Guide<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="link-icon"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"></path></svg></a>:</p><blockquote><p>A masked array is the combination of a standard <a target="_blank" rel="noreferrer" href="https://numpy.org/devdocs/reference/generated/numpy.ndarray.html#numpy.ndarray" class="link">numpy.ndarray<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="link-icon"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"></path></svg></a> and a <strong>mask</strong>. A mask is either <code>nomask</code>, indicating that no value of the associated array is invalid, or an array of booleans that determines for each element of the associated array whether the value is valid or not. When an element of the mask is <code>False</code>, the corresponding element of the associated array is valid and is said to be unmasked. When an element of the mask is <code>True</code>, the corresponding element of the associated array is said to be masked (invalid).</p></blockquote><p>We can think of a <a target="_blank" rel="noreferrer" href="https://numpy.org/devdocs/reference/maskedarray.baseclass.html#numpy.ma.MaskedArray" class="link">MaskedArray<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="link-icon"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"></path></svg></a> as a combination of:</p><ul><li><p>Data, as a regular <code>numpy.ndarray</code> of any shape or datatype;</p></li><li><p>A boolean mask with the same shape as the data;</p></li><li><p>A <code>fill_value</code>, a value that may be used to replace the invalid entries in order to return a standard <code>numpy.ndarray</code>.</p></li></ul><h2 id="when-can-they-be-useful" class="relative group"><span class="heading-text">When can they be useful?</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#when-can-they-be-useful" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>There are a few situations where masked arrays can be more useful than just eliminating the invalid entries of an array:</p><ul><li><p>When you want to preserve the values you masked for later processing, without copying the array;</p></li><li><p>When you have to handle many arrays, each with their own mask. If the mask is part of the array, you avoid bugs and the code is possibly more compact;</p></li><li><p>When you have different flags for missing or invalid values, and wish to preserve these flags without replacing them in the original dataset, but exclude them from computations;</p></li><li><p>If you can’t avoid or eliminate missing values, but don’t want to deal with <a target="_blank" rel="noreferrer" href="https://numpy.org/devdocs/reference/constants.html#numpy.nan" class="link">NaN (Not a Number)<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="link-icon"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"></path></svg></a> values in your operations.</p></li></ul><p>Masked arrays are also a good idea since the <code>numpy.ma</code> module also comes with a specific implementation of most <a target="_blank" rel="noreferrer" href="https://numpy.org/devdocs/glossary.html#term-ufunc" class="link">NumPy universal functions (ufuncs)<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="link-icon"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"></path></svg></a>, which means that you can still apply fast vectorized functions and operations on masked data. The output is then a masked array. We’ll see some examples of how this works in practice below.</p><h2 id="using-masked-arrays-to-see-covid-19-data" class="relative group"><span class="heading-text">Using masked arrays to see COVID-19 data</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#using-masked-arrays-to-see-covid-19-data" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>From <a target="_blank" rel="noreferrer" href="https://www.kaggle.com/atilamadai/covid19" class="link">Kaggle<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="link-icon"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"></path></svg></a> it is possible to download a dataset with initial data about the COVID-19 outbreak in the beginning of 2020. We are going to look at a small subset of this data, contained in the file <code>who_covid_19_sit_rep_time_series.csv</code>. <em>(Note that this file has been replaced with a version without missing data sometime in late 2020.)</em></p><div id="KxN08vQllZ" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">import numpy as np
import os

# The os.getcwd() function returns the current folder; you can change
# the filepath variable to point to the folder where you saved the .csv file
filepath = os.getcwd()
filename = os.path.join(filepath, &quot;who_covid_19_sit_rep_time_series.csv&quot;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="HKsPXneuxk51AAQtkmU5p" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><p>The data file contains data of different types and is organized as follows:</p><ul><li><p>The first row is a header line that (mostly) describes the data in each column that follow in the rows below, and beginning in the fourth column, the header is the date of the observation.</p></li><li><p>The second through seventh row contain summary data that is of a different type than that which we are going to examine, so we will need to exclude that from the data with which we will work.</p></li><li><p>The numerical data we wish to work with begins at column 4, row 8, and extends from there to the rightmost column and the lowermost row.</p></li></ul><p>Let’s explore the data inside this file for the first 14 days of records. To gather data from the <code>.csv</code> file, we will use the <a target="_blank" rel="noreferrer" href="https://numpy.org/devdocs/reference/generated/numpy.genfromtxt.html#numpy.genfromtxt" class="link">numpy.genfromtxt<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="link-icon"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"></path></svg></a> function, making sure we select only the columns with actual numbers instead of the first four columns which contain location data. We also skip the first 6
rows of this file, since they contain other data we are not interested in. Separately, we will extract the information about dates and location for this data.</p><div id="hvWrAMLEAI" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Note we are using skip_header and usecols to read only portions of the
# data file into each variable.
# Read just the dates for columns 4-18 from the first row
dates = np.genfromtxt(
    filename,
    dtype=np.str_,
    delimiter=&quot;,&quot;,
    max_rows=1,
    usecols=range(4, 18),
    encoding=&quot;utf-8-sig&quot;,
)
# Read the names of the geographic locations from the first two
# columns, skipping the first six rows
locations = np.genfromtxt(
    filename,
    dtype=np.str_,
    delimiter=&quot;,&quot;,
    skip_header=6,
    usecols=(0, 1),
    encoding=&quot;utf-8-sig&quot;,
)
# Read the numeric data from just the first 14 days
nbcases = np.genfromtxt(
    filename,
    dtype=np.int_,
    delimiter=&quot;,&quot;,
    skip_header=6,
    usecols=range(4, 18),
    encoding=&quot;utf-8-sig&quot;,
)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="dVFAoxQCWNW8w_B7sFN5v" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><p>Included in the <code>numpy.genfromtxt</code> function call, we have selected the <a target="_blank" rel="noreferrer" href="https://numpy.org/devdocs/reference/generated/numpy.dtype.html#numpy.dtype" class="link">numpy.dtype<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="link-icon"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"></path></svg></a> for each subset of the data (either an integer - <code>numpy.int_</code> - or a string of characters - <code>numpy.str_</code>). We have also used the <code>encoding</code> argument to select <code>utf-8-sig</code> as the encoding for the file (read more about encoding in the <a target="_blank" rel="noreferrer" href="https://docs.python.org/3/library/codecs.html#encodings-and-unicode" class="link">official Python documentation<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="link-icon"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"></path></svg></a>. You can read more about the <code>numpy.genfromtxt</code> function from the <a target="_blank" rel="noreferrer" href="https://numpy.org/devdocs/reference/generated/numpy.genfromtxt.html#numpy.genfromtxt" class="link">Reference Documentation<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="link-icon"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"></path></svg></a> or from the <a target="_blank" rel="noreferrer" href="https://numpy.org/devdocs/user/basics.io.genfromtxt.html" class="link">Basic IO tutorial<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="link-icon"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"></path></svg></a>.</p><h2 id="exploring-the-data" class="relative group"><span class="heading-text">Exploring the data</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#exploring-the-data" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>First of all, we can plot the whole set of data we have and see what it looks like. In order to get a readable plot, we select only a few of the dates to show in our <a target="_blank" rel="noreferrer" href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.xticks.html#matplotlib.pyplot.xticks" class="link">x-axis ticks<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="link-icon"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"></path></svg></a>. Note also that in our plot command, we use <code>nbcases.T</code> (the transpose of the <code>nbcases</code> array) since this means we will plot each row of the file as a separate line. We choose to plot a dashed line (using the <code>&#x27;--&#x27;</code> line style). See the <a target="_blank" rel="noreferrer" href="https://matplotlib.org/" class="link">matplotlib<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="link-icon"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"></path></svg></a> documentation for more info on this.</p><div id="PS39mDbr07" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">import matplotlib.pyplot as plt

selected_dates = [0, 3, 11, 13]
plt.plot(dates, nbcases.T, &quot;--&quot;)
plt.xticks(selected_dates, dates[selected_dates])
plt.title(&quot;COVID-19 cumulative cases from Jan 21 to Feb 3 2020&quot;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="6n3Vrkdop542WCjoBEocK" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div data-name="safe-output-image"><img src="/numpy-tutorials/build/d08c79eba17c823037f90ad9c9ac2cc1.png" alt="&lt;Figure size 640x480 with 1 Axes&gt;"/></div></div></div><p>The graph has a strange shape from January 24th to February 1st. It would be interesting to know where this data comes from. If we look at the <code>locations</code> array we extracted from the <code>.csv</code> file, we can see that we have two columns, where the first would contain regions and the second would contain the name of the country. However, only the first few rows contain data for the the first column (province names in China). Following that, we only have country names. So it would make sense to group all the data from China into a single row. For this, we’ll select from the <code>nbcases</code> array only the rows for which the second entry of the <code>locations</code> array corresponds to China. Next, we’ll use the <a target="_blank" rel="noreferrer" href="https://numpy.org/devdocs/reference/generated/numpy.sum.html#numpy.sum" class="link">numpy.sum<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="link-icon"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"></path></svg></a> function to sum all the selected rows (<code>axis=0</code>). Note also that row 35 corresponds to the total counts for the whole country for each date. Since we want to calculate the sum ourselves from the provinces data, we have to remove that row first from both <code>locations</code> and <code>nbcases</code>:</p><div id="Yd7CsM7FiQ" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">totals_row = 35
locations = np.delete(locations, (totals_row), axis=0)
nbcases = np.delete(nbcases, (totals_row), axis=0)

china_total = nbcases[locations[:, 1] == &quot;China&quot;].sum(axis=0)
china_total</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="g6-23AQFN8TyyGTtuQpaQ" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div data-name="safe-output-text" class="font-mono text-sm whitespace-pre-wrap myst-jp-safe-output-text"><code><span>array([  247,   288,   556,   817,   -22,   -22,   -15,   -10,    -9,
          -7,    -4, 11820, 14410, 17237])</span></code></div></div></div><p>Something’s wrong with this data - we are not supposed to have negative values in a cumulative data set. What’s going on?</p><h2 id="missing-data" class="relative group"><span class="heading-text">Missing data</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#missing-data" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>Looking at the data, here’s what we find: there is a period with <strong>missing data</strong>:</p><div id="fYtnztE8ER" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">nbcases</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="rpeniSlgBICu6rZ7VvUfI" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div data-name="safe-output-text" class="font-mono text-sm whitespace-pre-wrap myst-jp-safe-output-text"><code><span>array([[  258,   270,   375, ...,  7153,  9074, 11177],
       [   14,    17,    26, ...,   520,   604,   683],
       [   -1,     1,     1, ...,   422,   493,   566],
       ...,
       [   -1,    -1,    -1, ...,    -1,    -1,    -1],
       [   -1,    -1,    -1, ...,    -1,    -1,    -1],
       [   -1,    -1,    -1, ...,    -1,    -1,    -1]], shape=(263, 14))</span></code></div></div></div><p>All the <code>-1</code> values we are seeing come from <code>numpy.genfromtxt</code> attempting to read missing data from the original <code>.csv</code> file. Obviously, we
don’t want to compute missing data as <code>-1</code> - we just want to skip this value so it doesn’t interfere in our analysis. After importing the <code>numpy.ma</code> module, we’ll create a new array, this time masking the invalid values:</p><div id="JAQXlTCQBi" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">from numpy import ma

nbcases_ma = ma.masked_values(nbcases, -1)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="bdwI5FBu7eIpzA29cNWpu" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><p>If we look at the <code>nbcases_ma</code> masked array, this is what we have:</p><div id="IBrvIhGvmH" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">nbcases_ma</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="AOqrLw5byAWpHKdlBM0Hi" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div data-name="safe-output-text" class="font-mono text-sm whitespace-pre-wrap myst-jp-safe-output-text"><code><span>masked_array(
  data=[[258, 270, 375, ..., 7153, 9074, 11177],
        [14, 17, 26, ..., 520, 604, 683],
        [--, 1, 1, ..., 422, 493, 566],
        ...,
        [--, --, --, ..., --, --, --],
        [--, --, --, ..., --, --, --],
        [--, --, --, ..., --, --, --]],
  mask=[[False, False, False, ..., False, False, False],
        [False, False, False, ..., False, False, False],
        [ True, False, False, ..., False, False, False],
        ...,
        [ True,  True,  True, ...,  True,  True,  True],
        [ True,  True,  True, ...,  True,  True,  True],
        [ True,  True,  True, ...,  True,  True,  True]],
  fill_value=-1)</span></code></div></div></div><p>We can see that this is a different kind of array. As mentioned in the introduction, it has three attributes (<code>data</code>, <code>mask</code> and <code>fill_value</code>).
Keep in mind that the <code>mask</code> attribute has a <code>True</code> value for elements corresponding to <strong>invalid</strong> data (represented by two dashes in the <code>data</code> attribute).</p><p>Let’s try and see what the data looks like excluding the first row (data from the Hubei province in China) so we can look at the missing data more
closely:</p><div id="A6R8BZxm2G" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">plt.plot(dates, nbcases_ma[1:].T, &quot;--&quot;)
plt.xticks(selected_dates, dates[selected_dates])
plt.title(&quot;COVID-19 cumulative cases from Jan 21 to Feb 3 2020&quot;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="f1kefjpST10xYh-M5e-EI" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div data-name="safe-output-image"><img src="/numpy-tutorials/build/613f065b167d8d181b5dc5e1173b74db.png" alt="&lt;Figure size 640x480 with 1 Axes&gt;"/></div></div></div><p>Now that our data has been masked, let’s try summing up all the cases in China:</p><div id="FGtH702uvO" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">china_masked = nbcases_ma[locations[:, 1] == &quot;China&quot;].sum(axis=0)
china_masked</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="gOhZxkBDrkDFtNkHV2r9j" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div data-name="safe-output-text" class="font-mono text-sm whitespace-pre-wrap myst-jp-safe-output-text"><code><span>masked_array(data=[278, 309, 574, 835, 10, 10, 17, 22, 23, 25, 28, 11821,
                   14411, 17238],
             mask=[False, False, False, False, False, False, False, False,
                   False, False, False, False, False, False],
       fill_value=999999)</span></code></div></div></div><p>Note that <code>china_masked</code> is a masked array, so it has a different data structure than a regular NumPy array. Now, we can access its data directly by using the <code>.data</code> attribute:</p><div id="A7kpzLuDXr" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">china_total = china_masked.data
china_total</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="O4EZht9YgIcnJ3RGN6ZBX" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div data-name="safe-output-text" class="font-mono text-sm whitespace-pre-wrap myst-jp-safe-output-text"><code><span>array([  278,   309,   574,   835,    10,    10,    17,    22,    23,
          25,    28, 11821, 14411, 17238])</span></code></div></div></div><p>That is better: no more negative values. However, we can still see that for some days, the cumulative number of cases seems to go down (from 835 to 10, for example), which does not agree with the definition of “cumulative data”. If we look more closely at the data, we can see that in the period where there was missing data in mainland China, there was valid data for Hong Kong, Taiwan, Macau and “Unspecified” regions of China. Maybe we can remove those from the total sum of cases in China, to get a better understanding of the data.</p><p>First, we’ll identify the indices of locations in mainland China:</p><div id="hMMI0u2QQX" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">china_mask = (
    (locations[:, 1] == &quot;China&quot;)
    &amp; (locations[:, 0] != &quot;Hong Kong&quot;)
    &amp; (locations[:, 0] != &quot;Taiwan&quot;)
    &amp; (locations[:, 0] != &quot;Macau&quot;)
    &amp; (locations[:, 0] != &quot;Unspecified*&quot;)
)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="JFTw-6B9xaEu7hoNMg14F" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><p>Now, <code>china_mask</code> is an array of boolean values (<code>True</code> or <code>False</code>); we can check that the indices are what we wanted with the <a target="_blank" rel="noreferrer" href="https://numpy.org/devdocs/reference/generated/numpy.ma.nonzero.html#numpy.ma.nonzero" class="link">ma.nonzero<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="link-icon"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"></path></svg></a> method for masked arrays:</p><div id="ksgk4bDx3p" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">china_mask.nonzero()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="_CV2A6kX6x3Pu1LoJb1de" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div data-name="safe-output-text" class="font-mono text-sm whitespace-pre-wrap myst-jp-safe-output-text"><code><span>(array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16,
        17, 18, 19, 20, 21, 22, 23, 25, 26, 27, 28, 29, 31, 33]),)</span></code></div></div></div><p>Now we can correctly sum entries for mainland China:</p><div id="Ys9v185z6X" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">china_total = nbcases_ma[china_mask].sum(axis=0)
china_total</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="Jq8qrd-I-Bi44P7rkfLJi" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div data-name="safe-output-text" class="font-mono text-sm whitespace-pre-wrap myst-jp-safe-output-text"><code><span>masked_array(data=[278, 308, 440, 446, --, --, --, --, --, --, --, 11791,
                   14380, 17205],
             mask=[False, False, False, False,  True,  True,  True,  True,
                    True,  True,  True, False, False, False],
       fill_value=999999)</span></code></div></div></div><p>We can replace the data with this information and plot a new graph, focusing on Mainland China:</p><div id="tzb8g5jjng" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">plt.plot(dates, china_total.T, &quot;--&quot;)
plt.xticks(selected_dates, dates[selected_dates])
plt.title(&quot;COVID-19 cumulative cases from Jan 21 to Feb 3 2020 - Mainland China&quot;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="kYU3O_5nSwri4pql43P1s" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div data-name="safe-output-image"><img src="/numpy-tutorials/build/9c07c4f86dd02b243a8eec9094bc14fc.png" alt="&lt;Figure size 640x480 with 1 Axes&gt;"/></div></div></div><p>It’s clear that masked arrays are the right solution here. We cannot represent the missing data without mischaracterizing the evolution of the curve.</p><h2 id="fitting-data" class="relative group"><span class="heading-text">Fitting Data</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#fitting-data" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>One possibility we can think of is to interpolate the missing data to estimate the number of cases in late January. Observe that we can select the masked elements using the <code>.mask</code> attribute:</p><div id="MLK0YybX2R" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">china_total.mask
invalid = china_total[china_total.mask]
invalid</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="Dl64KRpvv41PHkIXbk3pI" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div data-name="safe-output-text" class="font-mono text-sm whitespace-pre-wrap myst-jp-safe-output-text"><code><span>masked_array(data=[--, --, --, --, --, --, --],
             mask=[ True,  True,  True,  True,  True,  True,  True],
       fill_value=999999,
            dtype=int64)</span></code></div></div></div><p>We can also access the valid entries by using the logical negation for this mask:</p><div id="EwzIgCLeAL" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">valid = china_total[~china_total.mask]
valid</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="_4tcoXMWV7WuSvYX089-M" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div data-name="safe-output-text" class="font-mono text-sm whitespace-pre-wrap myst-jp-safe-output-text"><code><span>masked_array(data=[278, 308, 440, 446, 11791, 14380, 17205],
             mask=[False, False, False, False, False, False, False],
       fill_value=999999)</span></code></div></div></div><p>Now, if we want to create a very simple approximation for this data, we should take into account the valid entries around the invalid ones. So first let’s select the dates for which the data is valid. Note that we can use the mask from the <code>china_total</code> masked array to index the dates array:</p><div id="iYhdJo0AiR" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">dates[~china_total.mask]</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="1pJwmzRvAzq3WTH1NkUqS" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div data-name="safe-output-text" class="font-mono text-sm whitespace-pre-wrap myst-jp-safe-output-text"><code><span>array([&#x27;1/21/20&#x27;, &#x27;1/22/20&#x27;, &#x27;1/23/20&#x27;, &#x27;1/24/20&#x27;, &#x27;2/1/20&#x27;, &#x27;2/2/20&#x27;,
       &#x27;2/3/20&#x27;], dtype=&#x27;&lt;U7&#x27;)</span></code></div></div></div><p>Finally, we can use the
<a target="_blank" rel="noreferrer" href="https://numpy.org/doc/stable/reference/generated/numpy.polynomial.polynomial.Polynomial.fit.html" class="link">fitting functionality of the numpy.polynomial<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="link-icon"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"></path></svg></a>
package to create a cubic polynomial model that fits the data as best as possible:</p><div id="n8WC5kfN8M" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">t = np.arange(len(china_total))
model = np.polynomial.Polynomial.fit(t[~china_total.mask], valid, deg=3)
plt.plot(t, china_total)
plt.plot(t, model(t), &quot;--&quot;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="D5_Vp0qDlo9yT0ii5t_hK" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div data-name="safe-output-image"><img src="/numpy-tutorials/build/705b0ce4ba67115fce959db22ca0f373.png" alt="&lt;Figure size 640x480 with 1 Axes&gt;"/></div></div></div><p>This plot is not so readable since the lines seem to be over each other, so let’s summarize in a more elaborate plot. We’ll plot the real data when
available, and show the cubic fit for unavailable data, using this fit to compute an estimate to the observed number of cases on January 28th 2020, 7 days after the beginning of the records:</p><div id="LA5gCXYBg8" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">plt.plot(t, china_total)
plt.plot(t[china_total.mask], model(t)[china_total.mask], &quot;--&quot;, color=&quot;orange&quot;)
plt.plot(7, model(7), &quot;r*&quot;)
plt.xticks([0, 7, 13], dates[[0, 7, 13]])
plt.yticks([0, model(7), 10000, 17500])
plt.legend([&quot;Mainland China&quot;, &quot;Cubic estimate&quot;, &quot;7 days after start&quot;])
plt.title(
    &quot;COVID-19 cumulative cases from Jan 21 to Feb 3 2020 - Mainland China\n&quot;
    &quot;Cubic estimate for 7 days after start&quot;
)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="Q2YZj-CXjFaPf-GfgeCqJ" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div data-name="safe-output-image"><img src="/numpy-tutorials/build/0af5964dc0b4e30f177f4bb98384bc83.png" alt="&lt;Figure size 640x480 with 1 Axes&gt;"/></div></div></div><h2 id="in-practice" class="relative group"><span class="heading-text">In practice</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#in-practice" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><ul><li><p>Adding <code>-1</code> to missing data is not a problem with <code>numpy.genfromtxt</code>; in this particular case, substituting the missing value with <code>0</code> might have been fine, but we’ll see later that this is far from a general solution. Also, it is possible to call the <code>numpy.genfromtxt</code> function using the <code>usemask</code> parameter. If <code>usemask=True</code>, <code>numpy.genfromtxt</code> automatically returns a masked array.</p></li></ul><h2 id="further-reading" class="relative group"><span class="heading-text">Further reading</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#further-reading" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>Topics not covered in this tutorial can be found in the documentation:</p><ul><li><p><a target="_blank" rel="noreferrer" href="https://numpy.org/devdocs/reference/generated/numpy.ma.harden_mask.html#numpy.ma.harden_mask" class="link">Hardmasks<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="link-icon"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"></path></svg></a> vs. <a target="_blank" rel="noreferrer" href="https://numpy.org/devdocs/reference/generated/numpy.ma.soften_mask.html#numpy.ma.soften_mask" class="link">softmasks<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="link-icon"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"></path></svg></a></p></li><li><p><a target="_blank" rel="noreferrer" href="https://numpy.org/devdocs/reference/maskedarray.generic.html#maskedarray-generic" class="link">The numpy.ma module<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="link-icon"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"></path></svg></a></p></li></ul><h3 id="reference" class="relative group"><span class="heading-text">Reference</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#reference" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><ul><li><p>Ensheng Dong, Hongru Du, Lauren Gardner, <em>An interactive web-based dashboard to track COVID-19 in real time</em>, The Lancet Infectious Diseases, Volume 20, Issue 5, 2020, Pages 533-534, ISSN 1473-3099, <cite class="" data-state="closed"><a href="https://doi.org/10.1016/s1473-3099(20)30120-1" target="_blank" rel="noreferrer" class="hover-link">Dong <em>et al.</em> (2020)</a></cite>.</p></li></ul><div class="myst-backmatter-parts"></div><section id="references" class="myst-bibliography article-grid subgrid-gap col-screen"><div><header class="myst-bibliography-header text-lg font-semibold text-stone-900 dark:text-white group">References<a class="no-underline text-inherit hover:text-inherit ml-2 select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#references" title="Link to References" aria-label="Link to References">¶</a></header></div><div class="myst-bibliography-list pl-3 mb-8 text-xs text-stone-500 dark:text-stone-300"><ol><li class="myst-bibliography-item break-words" id="cite-Dong_2020">Dong, E., Du, H., & Gardner, L. (2020). An interactive web-based dashboard to track COVID-19 in real time. <i>The Lancet Infectious Diseases</i>, <i>20</i>(5), 533–534. <a target="_blank" rel="noreferrer" href="https://doi.org/10.1016/s1473-3099(20)30120-1">10.1016/s1473-3099(20)30120-1</a></li></ol></div></section><div class="myst-footer-links flex pt-10 mb-10 space-x-4"><a class="myst-footer-link flex-1 block p-4 font-normal text-gray-600 no-underline border border-gray-200 rounded shadow-sm group hover:border-blue-600 dark:hover:border-blue-400 hover:text-blue-600 dark:hover:text-blue-400 dark:text-gray-100 dark:border-gray-500 hover:shadow-lg dark:shadow-neutral-700 myst-footer-link-prev" href="/numpy-tutorials/save-load-arrays"><div class="flex h-full align-middle"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1.5rem" height="1.5rem" class="myst-footer-link-icon self-center transition-transform group-hover:-translate-x-1 shrink-0"><path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"></path></svg><div class="flex-grow text-right"><div class="myst-footer-link-group text-xs text-gray-500 dark:text-gray-400">Features</div>Sharing Array Data</div></div></a><a class="myst-footer-link flex-1 block p-4 font-normal text-gray-600 no-underline border border-gray-200 rounded shadow-sm group hover:border-blue-600 dark:hover:border-blue-400 hover:text-blue-600 dark:hover:text-blue-400 dark:text-gray-100 dark:border-gray-500 hover:shadow-lg dark:shadow-neutral-700 myst-footer-link-next" href="/numpy-tutorials/contributing"><div class="flex h-full align-middle"><div class="flex-grow"><div class="myst-footer-link-group text-xs text-gray-500 dark:text-gray-400">Features</div>Contributing</div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1.5rem" height="1.5rem" class="myst-footer-link-icon self-center transition-transform group-hover:translate-x-1 shrink-0"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"></path></svg></div></a></div></article></main><script>((a,l)=>{if(!window.history.state||!window.history.state.key){let u=Math.random().toString(32).slice(2);window.history.replaceState({key:u},"")}try{let d=JSON.parse(sessionStorage.getItem(a)||"{}")[l||window.history.state.key];typeof d=="number"&&window.scrollTo(0,d)}catch(u){console.error(u),sessionStorage.removeItem(a)}})("positions", null)</script><link rel="modulepreload" href="/numpy-tutorials/build/entry.client-PCJPW7TK.js"/><link rel="modulepreload" href="/numpy-tutorials/build/_shared/chunk-AQ2CODAG.js"/><link rel="modulepreload" href="/numpy-tutorials/build/_shared/chunk-JJXTQVMA.js"/><link rel="modulepreload" href="/numpy-tutorials/build/_shared/chunk-OZE3FFNP.js"/><link rel="modulepreload" href="/numpy-tutorials/build/_shared/chunk-CH4FVTDV.js"/><link rel="modulepreload" href="/numpy-tutorials/build/_shared/chunk-C4DFGG5C.js"/><link rel="modulepreload" href="/numpy-tutorials/build/_shared/chunk-J7TUH54J.js"/><link rel="modulepreload" href="/numpy-tutorials/build/_shared/chunk-FZ2S7OYD.js"/><link rel="modulepreload" href="/numpy-tutorials/build/_shared/chunk-JEM6JXYA.js"/><link rel="modulepreload" href="/numpy-tutorials/build/_shared/chunk-34XIY2DH.js"/><link rel="modulepreload" href="/numpy-tutorials/build/_shared/chunk-KQM5FBHR.js"/><link rel="modulepreload" href="/numpy-tutorials/build/_shared/chunk-OCWQY3HK.js"/><link rel="modulepreload" href="/numpy-tutorials/build/_shared/chunk-7HNKBP4B.js"/><link rel="modulepreload" href="/numpy-tutorials/build/_shared/chunk-CUKUDK3R.js"/><link rel="modulepreload" href="/numpy-tutorials/build/_shared/chunk-3EBOCCHJ.js"/><link rel="modulepreload" href="/numpy-tutorials/build/_shared/chunk-O4VQNZ62.js"/><link rel="modulepreload" href="/numpy-tutorials/build/_shared/chunk-4OEDG4JQ.js"/><link rel="modulepreload" href="/numpy-tutorials/build/_shared/chunk-GUCIBHGO.js"/><link rel="modulepreload" href="/numpy-tutorials/build/root-SIO6LUTY.js"/><link rel="modulepreload" href="/numpy-tutorials/build/_shared/chunk-FAHZZXAC.js"/><link rel="modulepreload" href="/numpy-tutorials/build/routes/$-PRP77N34.js"/><script>window.__remixContext = {"url":"/tutorial-ma","state":{"loaderData":{"root":{"config":{"version":3,"myst":"1.8.0","options":{"favicon":"/numpy-tutorials/build/favicon-ea9223d23b14c1a4324de69e580eef0d.png","logo":"/numpy-tutorials/build/numpylogo-278cf34e28ed8e84d4b79121bf103557.svg"},"nav":[],"actions":[],"projects":[{"title":"Numpy Tutorials","authors":[{"id":"Numpy Community","name":"Numpy Community"}],"github":"https://github.com/numpy/numpy-tutorials","toc":[{"file":"content/index.md"},{"children":[{"file":"content/mooreslaw-tutorial.md"},{"file":"content/tutorial-deep-learning-on-mnist.md"},{"file":"content/tutorial-x-ray-image-processing.md"},{"file":"content/tutorial-static_equilibrium.md"},{"file":"content/tutorial-plotting-fractals.md"},{"file":"content/tutorial-air-quality-analysis.md"}],"title":"Applications"},{"children":[{"file":"content/tutorial-svd.md"},{"file":"content/save-load-arrays.md"},{"file":"content/tutorial-ma.md"}],"title":"Features"},{"children":[{"file":"content/tutorial-style-guide.md"}],"file":"content/contributing.md","title":"Contributing"}],"thumbnail":"/numpy-tutorials/build/b77199e99a54e59b2e3c037c2cc90f21.svg","exports":[],"bibliography":[],"index":"index","pages":[{"level":1,"title":"Applications"},{"slug":"mooreslaw-tutorial","title":"Determining Moore’s Law with real data in NumPy","short_title":"Moore's Law","description":"","date":"","thumbnail":"/numpy-tutorials/build/01-mooreslaw-tutoria-b7ed0ec7045e43a575dc871f1d80ba79.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"tutorial-deep-learning-on-mnist","title":"Deep learning on MNIST","description":"","date":"","thumbnail":"/numpy-tutorials/build/tutorial-deep-learni-18c33a02a86a205d4dc00e618c78f2e1.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"tutorial-x-ray-image-processing","title":"X-ray image processing","description":"","date":"","thumbnail":"/numpy-tutorials/build/tutorial-x-ray-image-65a7be1124126ce5b284c9f07ce0d6ed.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"tutorial-static-equilibrium","title":"Determining Static Equilibrium in NumPy","short_title":"Static Equilibrium","description":"","date":"","thumbnail":"/numpy-tutorials/build/static_eqbm-fig01-02f515938c9167160a1aa8c0c979c840.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"tutorial-plotting-fractals","title":"Plotting Fractals","description":"","date":"","thumbnail":"/numpy-tutorials/build/fractal-05cf84dbcdf76b80fa747a06f861f631.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"tutorial-air-quality-analysis","title":"Analyzing the impact of the lockdown on air quality in Delhi, India","short_title":"Analyzing Air Quality","description":"","date":"","thumbnail":"/numpy-tutorials/build/11-delhi-aqi-719dde59d7502416fd089cc1a3ee750a.jpg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Features"},{"slug":"tutorial-svd","title":"Linear algebra on n-dimensional arrays","short_title":"Linear Algebra on n-D arrays","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"save-load-arrays","title":"Saving and sharing your NumPy arrays","short_title":"Sharing Array Data","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"tutorial-ma","title":"Masked Arrays","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"contributing","title":"Contributing","short_title":"Contributing","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"tutorial-style-guide","title":"Learn to write a NumPy tutorial","short_title":"Style Guide","description":"","date":"","thumbnail":"/numpy-tutorials/build/56554e3d11983df8f484e8d7b2c2bdae.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2}]}]},"CONTENT_CDN_PORT":"3100","MODE":"static","BASE_URL":"/numpy-tutorials"},"routes/$":{"config":{"version":3,"myst":"1.8.0","options":{"favicon":"/numpy-tutorials/build/favicon-ea9223d23b14c1a4324de69e580eef0d.png","logo":"/numpy-tutorials/build/numpylogo-278cf34e28ed8e84d4b79121bf103557.svg"},"nav":[],"actions":[],"projects":[{"title":"Numpy Tutorials","authors":[{"id":"Numpy Community","name":"Numpy Community"}],"github":"https://github.com/numpy/numpy-tutorials","toc":[{"file":"content/index.md"},{"children":[{"file":"content/mooreslaw-tutorial.md"},{"file":"content/tutorial-deep-learning-on-mnist.md"},{"file":"content/tutorial-x-ray-image-processing.md"},{"file":"content/tutorial-static_equilibrium.md"},{"file":"content/tutorial-plotting-fractals.md"},{"file":"content/tutorial-air-quality-analysis.md"}],"title":"Applications"},{"children":[{"file":"content/tutorial-svd.md"},{"file":"content/save-load-arrays.md"},{"file":"content/tutorial-ma.md"}],"title":"Features"},{"children":[{"file":"content/tutorial-style-guide.md"}],"file":"content/contributing.md","title":"Contributing"}],"thumbnail":"/numpy-tutorials/build/b77199e99a54e59b2e3c037c2cc90f21.svg","exports":[],"bibliography":[],"index":"index","pages":[{"level":1,"title":"Applications"},{"slug":"mooreslaw-tutorial","title":"Determining Moore’s Law with real data in NumPy","short_title":"Moore's Law","description":"","date":"","thumbnail":"/numpy-tutorials/build/01-mooreslaw-tutoria-b7ed0ec7045e43a575dc871f1d80ba79.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"tutorial-deep-learning-on-mnist","title":"Deep learning on MNIST","description":"","date":"","thumbnail":"/numpy-tutorials/build/tutorial-deep-learni-18c33a02a86a205d4dc00e618c78f2e1.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"tutorial-x-ray-image-processing","title":"X-ray image processing","description":"","date":"","thumbnail":"/numpy-tutorials/build/tutorial-x-ray-image-65a7be1124126ce5b284c9f07ce0d6ed.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"tutorial-static-equilibrium","title":"Determining Static Equilibrium in NumPy","short_title":"Static Equilibrium","description":"","date":"","thumbnail":"/numpy-tutorials/build/static_eqbm-fig01-02f515938c9167160a1aa8c0c979c840.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"tutorial-plotting-fractals","title":"Plotting Fractals","description":"","date":"","thumbnail":"/numpy-tutorials/build/fractal-05cf84dbcdf76b80fa747a06f861f631.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"tutorial-air-quality-analysis","title":"Analyzing the impact of the lockdown on air quality in Delhi, India","short_title":"Analyzing Air Quality","description":"","date":"","thumbnail":"/numpy-tutorials/build/11-delhi-aqi-719dde59d7502416fd089cc1a3ee750a.jpg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Features"},{"slug":"tutorial-svd","title":"Linear algebra on n-dimensional arrays","short_title":"Linear Algebra on n-D arrays","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"save-load-arrays","title":"Saving and sharing your NumPy arrays","short_title":"Sharing Array Data","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"tutorial-ma","title":"Masked Arrays","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"contributing","title":"Contributing","short_title":"Contributing","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"tutorial-style-guide","title":"Learn to write a NumPy tutorial","short_title":"Style Guide","description":"","date":"","thumbnail":"/numpy-tutorials/build/56554e3d11983df8f484e8d7b2c2bdae.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2}]}]},"page":{"version":3,"kind":"Notebook","sha256":"27f8a0a20ce7f8eab156b2a74a59f29ce9a673d5a849e8deccfc719625b3a9d2","slug":"tutorial-ma","location":"/content/tutorial-ma.md","dependencies":[],"frontmatter":{"title":"Masked Arrays","kernelspec":{"name":"python3","display_name":"Python 3","language":"python"},"jupytext":{"formats":"ipynb,md:myst","text_representation":{"extension":".md","format_name":"myst","format_version":"0.13","jupytext_version":"1.11.1"}},"content_includes_title":false,"authors":[{"id":"Numpy Community","name":"Numpy Community"}],"github":"https://github.com/numpy/numpy-tutorials","numbering":{"title":{"offset":1}},"source_url":"https://github.com/numpy/numpy-tutorials/blob/main/content/tutorial-ma.md","edit_url":"https://github.com/numpy/numpy-tutorials/edit/main/content/tutorial-ma.md","exports":[{"format":"md","filename":"tutorial-ma.md","url":"/numpy-tutorials/build/tutorial-ma-fc2cd4e7eebd4da91fcd1c775e031f2e.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"heading","depth":2,"position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"What you’ll do","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"gVPHv7qrFq"}],"identifier":"what-youll-do","label":"What you’ll do","html_id":"what-youll-do","implicit":true,"key":"O1ivAMzMHd"},{"type":"paragraph","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"Use the masked arrays module from NumPy to analyze COVID-19 data and deal with missing values.","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"dMd8nrDr2P"}],"key":"WcdnvmDlpt"},{"type":"heading","depth":2,"position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"What you’ll learn","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"iNiVuD5uwC"}],"identifier":"what-youll-learn","label":"What you’ll learn","html_id":"what-youll-learn","implicit":true,"key":"Wo5CWrmp9O"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":23,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"You’ll understand what are masked arrays and how they can be created","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"JESurdbkMe"}],"key":"E233lThH2H"}],"key":"pY5OenBJlx"},{"type":"listItem","spread":true,"position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"You’ll see how to access and modify data for masked arrays","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"QJg9sPJoEm"}],"key":"mQV7xgJUEd"}],"key":"n3Qce1zLwY"},{"type":"listItem","spread":true,"position":{"start":{"line":25,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"You’ll be able to decide when the use of masked arrays is appropriate in some of your applications","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"L37m241uET"}],"key":"DpaLCPzzzl"}],"key":"XuhPtiyCvY"}],"key":"fDa12vSu1E"},{"type":"heading","depth":2,"position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"text","value":"What you’ll need","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"RbkTwnE2J8"}],"identifier":"what-youll-need","label":"What you’ll need","html_id":"what-youll-need","implicit":true,"key":"ZhBGSJPBHU"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":29,"column":1},"end":{"line":32,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Basic familiarity with Python. If you would like to refresh your memory, take a look at the ","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"b1AErHnP3w"},{"type":"link","url":"https://docs.python.org/dev/tutorial/index.html","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"text","value":"Python tutorial","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"H3mo4i0v0x"}],"urlSource":"https://docs.python.org/dev/tutorial/index.html","key":"hYUGrIqtcp"},{"type":"text","value":".","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"f3RIvwXUJd"}],"key":"VIntRx9rkg"}],"key":"RF5KWfW3vD"},{"type":"listItem","spread":true,"position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Basic familiarity with NumPy","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"DNnY2rPGQk"}],"key":"Yx6gZ1sgTt"}],"key":"qyWY5bV5SL"},{"type":"listItem","spread":true,"position":{"start":{"line":31,"column":1},"end":{"line":32,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"To run the plots on your computer, you need ","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"K3ht8cuWRC"},{"type":"link","url":"https://matplotlib.org","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"text","value":"matplotlib","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"tPaQGRTdkC"}],"urlSource":"https://matplotlib.org","key":"MhXXBpljjy"},{"type":"text","value":".","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"ZVTQQzup9b"}],"key":"NRE7TKmoAj"}],"key":"atwpRKlWwe"}],"key":"wzdqr0tPjE"}],"key":"PocN7s08DI"},{"type":"block","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"thematicBreak","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"key":"CgZbDOvlGu"}],"key":"S9wigt1751"},{"type":"block","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"children":[{"type":"heading","depth":2,"position":{"start":{"line":39,"column":1},"end":{"line":39,"column":1}},"children":[{"type":"text","value":"What are masked arrays?","position":{"start":{"line":39,"column":1},"end":{"line":39,"column":1}},"key":"m2ZkUM0t6h"}],"identifier":"what-are-masked-arrays","label":"What are masked arrays?","html_id":"what-are-masked-arrays","implicit":true,"key":"NMfApoRJkD"},{"type":"paragraph","position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"children":[{"type":"text","value":"Consider the following problem. You have a dataset with missing or invalid entries. If you’re doing any kind of processing on this data, and want to ","position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"key":"u1lExkERX5"},{"type":"emphasis","position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"children":[{"type":"text","value":"skip","position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"key":"rxV38T08nQ"}],"key":"tIoI4i21Gj"},{"type":"text","value":" or flag these unwanted entries without just deleting them, you may have to use conditionals or filter your data somehow. The ","position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"key":"gEOHgyhiyc"},{"type":"link","url":"https://numpy.org/devdocs/reference/maskedarray.generic.html#module-numpy.ma","position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"children":[{"type":"text","value":"numpy.ma","position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"key":"Yi5LjCBLYP"}],"urlSource":"https://numpy.org/devdocs/reference/maskedarray.generic.html#module-numpy.ma","key":"hggBxd5i6k"},{"type":"text","value":" module provides some of the same functionality of ","position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"key":"Da2SChCBHW"},{"type":"link","url":"https://numpy.org/devdocs/reference/generated/numpy.ndarray.html#numpy.ndarray","position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"children":[{"type":"text","value":"NumPy ndarrays","position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"key":"v6UsLRoQxU"}],"urlSource":"https://numpy.org/devdocs/reference/generated/numpy.ndarray.html#numpy.ndarray","key":"sMvZJUwuLs"},{"type":"text","value":" with added structure to ensure invalid entries are not used in computation.","position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"key":"gLYACBiHJD"}],"key":"tDPzu82aaM"},{"type":"paragraph","position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"children":[{"type":"text","value":"From the ","position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"key":"C8F1a6wwK3"},{"type":"link","url":"https://numpy.org/devdocs/reference/maskedarray.generic.html#module-numpy.ma","position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"children":[{"type":"text","value":"Reference Guide","position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"key":"ssPvT7WjhF"}],"urlSource":"https://numpy.org/devdocs/reference/maskedarray.generic.html#module-numpy.ma","key":"VMO9lnN8vT"},{"type":"text","value":":","position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"key":"cdtnMojZLA"}],"key":"TsoSWgGDps"},{"type":"blockquote","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"children":[{"type":"text","value":"A masked array is the combination of a standard ","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"oXDY1R9Jhn"},{"type":"link","url":"https://numpy.org/devdocs/reference/generated/numpy.ndarray.html#numpy.ndarray","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"children":[{"type":"text","value":"numpy.ndarray","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"x4QwWjSlRC"}],"urlSource":"https://numpy.org/devdocs/reference/generated/numpy.ndarray.html#numpy.ndarray","key":"GOKgvDlT3Z"},{"type":"text","value":" and a ","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"y7tHdzD5Zt"},{"type":"strong","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"children":[{"type":"text","value":"mask","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"EYcFT1KDcH"}],"key":"NjO3h2hKEW"},{"type":"text","value":". A mask is either ","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"BUGoCibYPE"},{"type":"inlineCode","value":"nomask","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"dvWEYSCHAF"},{"type":"text","value":", indicating that no value of the associated array is invalid, or an array of booleans that determines for each element of the associated array whether the value is valid or not. When an element of the mask is ","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"Sq78cvSAgC"},{"type":"inlineCode","value":"False","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"QFsH2S7a06"},{"type":"text","value":", the corresponding element of the associated array is valid and is said to be unmasked. When an element of the mask is ","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"KrHNDq5pO2"},{"type":"inlineCode","value":"True","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"aXgwh6rjal"},{"type":"text","value":", the corresponding element of the associated array is said to be masked (invalid).","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"sZ45XYkL7y"}],"key":"GomPtSQu2z"}],"key":"HzuhTUxwGU"},{"type":"paragraph","position":{"start":{"line":47,"column":1},"end":{"line":47,"column":1}},"children":[{"type":"text","value":"We can think of a ","position":{"start":{"line":47,"column":1},"end":{"line":47,"column":1}},"key":"tAbqHGf9Je"},{"type":"link","url":"https://numpy.org/devdocs/reference/maskedarray.baseclass.html#numpy.ma.MaskedArray","position":{"start":{"line":47,"column":1},"end":{"line":47,"column":1}},"children":[{"type":"text","value":"MaskedArray","position":{"start":{"line":47,"column":1},"end":{"line":47,"column":1}},"key":"DA6murYHo8"}],"urlSource":"https://numpy.org/devdocs/reference/maskedarray.baseclass.html#numpy.ma.MaskedArray","key":"ma4Azv5a9Q"},{"type":"text","value":" as a combination of:","position":{"start":{"line":47,"column":1},"end":{"line":47,"column":1}},"key":"E3UoP0XtXL"}],"key":"OMQH2LjWtL"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":49,"column":1},"end":{"line":52,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":49,"column":1},"end":{"line":49,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Data, as a regular ","position":{"start":{"line":49,"column":1},"end":{"line":49,"column":1}},"key":"YozoSWjbCg"},{"type":"inlineCode","value":"numpy.ndarray","position":{"start":{"line":49,"column":1},"end":{"line":49,"column":1}},"key":"fuL3idkGrd"},{"type":"text","value":" of any shape or datatype;","position":{"start":{"line":49,"column":1},"end":{"line":49,"column":1}},"key":"lT6iI4QsV9"}],"key":"mDM7weOero"}],"key":"xdE3lYRFbC"},{"type":"listItem","spread":true,"position":{"start":{"line":50,"column":1},"end":{"line":50,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"A boolean mask with the same shape as the data;","position":{"start":{"line":50,"column":1},"end":{"line":50,"column":1}},"key":"XP1xg9nWWm"}],"key":"vauDUDfVIn"}],"key":"BAij8LfN32"},{"type":"listItem","spread":true,"position":{"start":{"line":51,"column":1},"end":{"line":52,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"A ","position":{"start":{"line":51,"column":1},"end":{"line":51,"column":1}},"key":"fONDyaxSek"},{"type":"inlineCode","value":"fill_value","position":{"start":{"line":51,"column":1},"end":{"line":51,"column":1}},"key":"N7iCioHsBt"},{"type":"text","value":", a value that may be used to replace the invalid entries in order to return a standard ","position":{"start":{"line":51,"column":1},"end":{"line":51,"column":1}},"key":"TL0YoYpzbE"},{"type":"inlineCode","value":"numpy.ndarray","position":{"start":{"line":51,"column":1},"end":{"line":51,"column":1}},"key":"ewMgUioaC6"},{"type":"text","value":".","position":{"start":{"line":51,"column":1},"end":{"line":51,"column":1}},"key":"giNvQg2fLJ"}],"key":"kdopvQFU7z"}],"key":"IvPbILiCwG"}],"key":"EDJoiQKIgh"},{"type":"heading","depth":2,"position":{"start":{"line":53,"column":1},"end":{"line":53,"column":1}},"children":[{"type":"text","value":"When can they be useful?","position":{"start":{"line":53,"column":1},"end":{"line":53,"column":1}},"key":"CaBu4Z6cN9"}],"identifier":"when-can-they-be-useful","label":"When can they be useful?","html_id":"when-can-they-be-useful","implicit":true,"key":"MA7MV4n9zq"},{"type":"paragraph","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"children":[{"type":"text","value":"There are a few situations where masked arrays can be more useful than just eliminating the invalid entries of an array:","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"key":"xZsNf9LT7A"}],"key":"I9sodpMzWk"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":57,"column":1},"end":{"line":61,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"When you want to preserve the values you masked for later processing, without copying the array;","position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"key":"w6u0eNVwEB"}],"key":"i3D9CPTGjC"}],"key":"z4XGDgQgaZ"},{"type":"listItem","spread":true,"position":{"start":{"line":58,"column":1},"end":{"line":58,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"When you have to handle many arrays, each with their own mask. If the mask is part of the array, you avoid bugs and the code is possibly more compact;","position":{"start":{"line":58,"column":1},"end":{"line":58,"column":1}},"key":"Oxfz2agQxS"}],"key":"hBfU5iRRry"}],"key":"eEECieEEfJ"},{"type":"listItem","spread":true,"position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"When you have different flags for missing or invalid values, and wish to preserve these flags without replacing them in the original dataset, but exclude them from computations;","position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"key":"v3jToUgWLx"}],"key":"POGWihmNy0"}],"key":"z2IUnpKYz0"},{"type":"listItem","spread":true,"position":{"start":{"line":60,"column":1},"end":{"line":61,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"If you can’t avoid or eliminate missing values, but don’t want to deal with ","position":{"start":{"line":60,"column":1},"end":{"line":60,"column":1}},"key":"UCsM9iqwWX"},{"type":"link","url":"https://numpy.org/devdocs/reference/constants.html#numpy.nan","position":{"start":{"line":60,"column":1},"end":{"line":60,"column":1}},"children":[{"type":"text","value":"NaN (Not a Number)","position":{"start":{"line":60,"column":1},"end":{"line":60,"column":1}},"key":"SZSf7XAXaj"}],"urlSource":"https://numpy.org/devdocs/reference/constants.html#numpy.nan","key":"L2xRkq85Nq"},{"type":"text","value":" values in your operations.","position":{"start":{"line":60,"column":1},"end":{"line":60,"column":1}},"key":"JBadlMLVHi"}],"key":"aKOj3QvF10"}],"key":"TdQNFLbi4L"}],"key":"d8qMs7341I"},{"type":"paragraph","position":{"start":{"line":62,"column":1},"end":{"line":62,"column":1}},"children":[{"type":"text","value":"Masked arrays are also a good idea since the ","position":{"start":{"line":62,"column":1},"end":{"line":62,"column":1}},"key":"TfDRh3sWeE"},{"type":"inlineCode","value":"numpy.ma","position":{"start":{"line":62,"column":1},"end":{"line":62,"column":1}},"key":"fFpeHskgzM"},{"type":"text","value":" module also comes with a specific implementation of most ","position":{"start":{"line":62,"column":1},"end":{"line":62,"column":1}},"key":"QFonjrFqF9"},{"type":"link","url":"https://numpy.org/devdocs/glossary.html#term-ufunc","position":{"start":{"line":62,"column":1},"end":{"line":62,"column":1}},"children":[{"type":"text","value":"NumPy universal functions (ufuncs)","position":{"start":{"line":62,"column":1},"end":{"line":62,"column":1}},"key":"IzMnugnMAr"}],"urlSource":"https://numpy.org/devdocs/glossary.html#term-ufunc","key":"euhsqHFB9b"},{"type":"text","value":", which means that you can still apply fast vectorized functions and operations on masked data. The output is then a masked array. We’ll see some examples of how this works in practice below.","position":{"start":{"line":62,"column":1},"end":{"line":62,"column":1}},"key":"hAEIizM3Te"}],"key":"sjrvqOJDpM"}],"key":"bxExrLthiY"},{"type":"block","position":{"start":{"line":64,"column":1},"end":{"line":64,"column":1}},"children":[{"type":"heading","depth":2,"position":{"start":{"line":66,"column":1},"end":{"line":66,"column":1}},"children":[{"type":"text","value":"Using masked arrays to see COVID-19 data","position":{"start":{"line":66,"column":1},"end":{"line":66,"column":1}},"key":"hE5HxNhHTy"}],"identifier":"using-masked-arrays-to-see-covid-19-data","label":"Using masked arrays to see COVID-19 data","html_id":"using-masked-arrays-to-see-covid-19-data","implicit":true,"key":"IGSc41sKqt"},{"type":"paragraph","position":{"start":{"line":68,"column":1},"end":{"line":68,"column":1}},"children":[{"type":"text","value":"From ","position":{"start":{"line":68,"column":1},"end":{"line":68,"column":1}},"key":"sd63oVXr0K"},{"type":"link","url":"https://www.kaggle.com/atilamadai/covid19","position":{"start":{"line":68,"column":1},"end":{"line":68,"column":1}},"children":[{"type":"text","value":"Kaggle","position":{"start":{"line":68,"column":1},"end":{"line":68,"column":1}},"key":"Kzu93nPJjl"}],"urlSource":"https://www.kaggle.com/atilamadai/covid19","key":"Fbxm1ywCUQ"},{"type":"text","value":" it is possible to download a dataset with initial data about the COVID-19 outbreak in the beginning of 2020. We are going to look at a small subset of this data, contained in the file ","position":{"start":{"line":68,"column":1},"end":{"line":68,"column":1}},"key":"wve8eQJpXv"},{"type":"inlineCode","value":"who_covid_19_sit_rep_time_series.csv","position":{"start":{"line":68,"column":1},"end":{"line":68,"column":1}},"key":"QWHKRUI5UQ"},{"type":"text","value":". ","position":{"start":{"line":68,"column":1},"end":{"line":68,"column":1}},"key":"iQeYccsvQG"},{"type":"emphasis","position":{"start":{"line":68,"column":1},"end":{"line":68,"column":1}},"children":[{"type":"text","value":"(Note that this file has been replaced with a version without missing data sometime in late 2020.)","position":{"start":{"line":68,"column":1},"end":{"line":68,"column":1}},"key":"H1OuHNT1GR"}],"key":"pUAesymA8I"}],"key":"BWVXFNjh9Y"}],"key":"FtC3Nqv2hd"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import numpy as np\nimport os\n\n# The os.getcwd() function returns the current folder; you can change\n# the filepath variable to point to the folder where you saved the .csv file\nfilepath = os.getcwd()\nfilename = os.path.join(filepath, \"who_covid_19_sit_rep_time_series.csv\")","key":"rYVVXWtyX8"},{"type":"outputs","id":"HKsPXneuxk51AAQtkmU5p","children":[],"key":"bO0I1PoeI1"}],"key":"KxN08vQllZ"},{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":80,"column":1},"end":{"line":80,"column":1}},"children":[{"type":"text","value":"The data file contains data of different types and is organized as follows:","position":{"start":{"line":80,"column":1},"end":{"line":80,"column":1}},"key":"FLuSqJE2SO"}],"key":"acXUpBudbZ"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":82,"column":1},"end":{"line":85,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":82,"column":1},"end":{"line":82,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"The first row is a header line that (mostly) describes the data in each column that follow in the rows below, and beginning in the fourth column, the header is the date of the observation.","position":{"start":{"line":82,"column":1},"end":{"line":82,"column":1}},"key":"fWlTryMQrk"}],"key":"ELVWBk2qWe"}],"key":"PV8WRHn5gD"},{"type":"listItem","spread":true,"position":{"start":{"line":83,"column":1},"end":{"line":83,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"The second through seventh row contain summary data that is of a different type than that which we are going to examine, so we will need to exclude that from the data with which we will work.","position":{"start":{"line":83,"column":1},"end":{"line":83,"column":1}},"key":"JrRikkvA23"}],"key":"BHLImPARzn"}],"key":"jm6X1m8RiG"},{"type":"listItem","spread":true,"position":{"start":{"line":84,"column":1},"end":{"line":85,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"The numerical data we wish to work with begins at column 4, row 8, and extends from there to the rightmost column and the lowermost row.","position":{"start":{"line":84,"column":1},"end":{"line":84,"column":1}},"key":"hUpJajoboT"}],"key":"fprDdLQyrI"}],"key":"VBMQdAYvsW"}],"key":"St9NsEaPrE"},{"type":"paragraph","position":{"start":{"line":86,"column":1},"end":{"line":87,"column":1}},"children":[{"type":"text","value":"Let’s explore the data inside this file for the first 14 days of records. To gather data from the ","position":{"start":{"line":86,"column":1},"end":{"line":86,"column":1}},"key":"MhLYm2YRjz"},{"type":"inlineCode","value":".csv","position":{"start":{"line":86,"column":1},"end":{"line":86,"column":1}},"key":"avR9WWQRWJ"},{"type":"text","value":" file, we will use the ","position":{"start":{"line":86,"column":1},"end":{"line":86,"column":1}},"key":"GiCeg7GCHM"},{"type":"link","url":"https://numpy.org/devdocs/reference/generated/numpy.genfromtxt.html#numpy.genfromtxt","position":{"start":{"line":86,"column":1},"end":{"line":86,"column":1}},"children":[{"type":"text","value":"numpy.genfromtxt","position":{"start":{"line":86,"column":1},"end":{"line":86,"column":1}},"key":"pJ7aclswkp"}],"urlSource":"https://numpy.org/devdocs/reference/generated/numpy.genfromtxt.html#numpy.genfromtxt","key":"ZJ96ZGhMKE"},{"type":"text","value":" function, making sure we select only the columns with actual numbers instead of the first four columns which contain location data. We also skip the first 6\nrows of this file, since they contain other data we are not interested in. Separately, we will extract the information about dates and location for this data.","position":{"start":{"line":86,"column":1},"end":{"line":86,"column":1}},"key":"bDL6UFQvm4"}],"key":"Hc5aPWPiiV"}],"key":"tWgopt4SEy"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Note we are using skip_header and usecols to read only portions of the\n# data file into each variable.\n# Read just the dates for columns 4-18 from the first row\ndates = np.genfromtxt(\n    filename,\n    dtype=np.str_,\n    delimiter=\",\",\n    max_rows=1,\n    usecols=range(4, 18),\n    encoding=\"utf-8-sig\",\n)\n# Read the names of the geographic locations from the first two\n# columns, skipping the first six rows\nlocations = np.genfromtxt(\n    filename,\n    dtype=np.str_,\n    delimiter=\",\",\n    skip_header=6,\n    usecols=(0, 1),\n    encoding=\"utf-8-sig\",\n)\n# Read the numeric data from just the first 14 days\nnbcases = np.genfromtxt(\n    filename,\n    dtype=np.int_,\n    delimiter=\",\",\n    skip_header=6,\n    usecols=range(4, 18),\n    encoding=\"utf-8-sig\",\n)","key":"MO00wf6SAd"},{"type":"outputs","id":"dVFAoxQCWNW8w_B7sFN5v","children":[],"key":"n9vhJuk3xj"}],"key":"hvWrAMLEAI"},{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":122,"column":1},"end":{"line":122,"column":1}},"children":[{"type":"text","value":"Included in the ","position":{"start":{"line":122,"column":1},"end":{"line":122,"column":1}},"key":"tVSvJFctPJ"},{"type":"inlineCode","value":"numpy.genfromtxt","position":{"start":{"line":122,"column":1},"end":{"line":122,"column":1}},"key":"VvBvifIftT"},{"type":"text","value":" function call, we have selected the ","position":{"start":{"line":122,"column":1},"end":{"line":122,"column":1}},"key":"z9FaTVN0n9"},{"type":"link","url":"https://numpy.org/devdocs/reference/generated/numpy.dtype.html#numpy.dtype","position":{"start":{"line":122,"column":1},"end":{"line":122,"column":1}},"children":[{"type":"text","value":"numpy.dtype","position":{"start":{"line":122,"column":1},"end":{"line":122,"column":1}},"key":"lSWaQW1qpU"}],"urlSource":"https://numpy.org/devdocs/reference/generated/numpy.dtype.html#numpy.dtype","key":"vvcP1ZcSr3"},{"type":"text","value":" for each subset of the data (either an integer - ","position":{"start":{"line":122,"column":1},"end":{"line":122,"column":1}},"key":"VdmlHiePzb"},{"type":"inlineCode","value":"numpy.int_","position":{"start":{"line":122,"column":1},"end":{"line":122,"column":1}},"key":"qd1tKGPDAr"},{"type":"text","value":" - or a string of characters - ","position":{"start":{"line":122,"column":1},"end":{"line":122,"column":1}},"key":"wF8nwiGYTG"},{"type":"inlineCode","value":"numpy.str_","position":{"start":{"line":122,"column":1},"end":{"line":122,"column":1}},"key":"PoFkj1JGsr"},{"type":"text","value":"). We have also used the ","position":{"start":{"line":122,"column":1},"end":{"line":122,"column":1}},"key":"naMnMdGY4W"},{"type":"inlineCode","value":"encoding","position":{"start":{"line":122,"column":1},"end":{"line":122,"column":1}},"key":"zFZ2Km9fpB"},{"type":"text","value":" argument to select ","position":{"start":{"line":122,"column":1},"end":{"line":122,"column":1}},"key":"M3FQzIjA8b"},{"type":"inlineCode","value":"utf-8-sig","position":{"start":{"line":122,"column":1},"end":{"line":122,"column":1}},"key":"DD0ZG8t7QP"},{"type":"text","value":" as the encoding for the file (read more about encoding in the ","position":{"start":{"line":122,"column":1},"end":{"line":122,"column":1}},"key":"JUJ2OhPD5E"},{"type":"link","url":"https://docs.python.org/3/library/codecs.html#encodings-and-unicode","position":{"start":{"line":122,"column":1},"end":{"line":122,"column":1}},"children":[{"type":"text","value":"official Python documentation","position":{"start":{"line":122,"column":1},"end":{"line":122,"column":1}},"key":"WOd6xrLnhH"}],"urlSource":"https://docs.python.org/3/library/codecs.html#encodings-and-unicode","key":"THJyZaLcyr"},{"type":"text","value":". You can read more about the ","position":{"start":{"line":122,"column":1},"end":{"line":122,"column":1}},"key":"TTsaaOGZFK"},{"type":"inlineCode","value":"numpy.genfromtxt","position":{"start":{"line":122,"column":1},"end":{"line":122,"column":1}},"key":"DgedtlKiIG"},{"type":"text","value":" function from the ","position":{"start":{"line":122,"column":1},"end":{"line":122,"column":1}},"key":"G9b15L5dzv"},{"type":"link","url":"https://numpy.org/devdocs/reference/generated/numpy.genfromtxt.html#numpy.genfromtxt","position":{"start":{"line":122,"column":1},"end":{"line":122,"column":1}},"children":[{"type":"text","value":"Reference Documentation","position":{"start":{"line":122,"column":1},"end":{"line":122,"column":1}},"key":"fgisxOvt1C"}],"urlSource":"https://numpy.org/devdocs/reference/generated/numpy.genfromtxt.html#numpy.genfromtxt","key":"S1XrA9BG0T"},{"type":"text","value":" or from the ","position":{"start":{"line":122,"column":1},"end":{"line":122,"column":1}},"key":"HquXroSIeU"},{"type":"link","url":"https://numpy.org/devdocs/user/basics.io.genfromtxt.html","position":{"start":{"line":122,"column":1},"end":{"line":122,"column":1}},"children":[{"type":"text","value":"Basic IO tutorial","position":{"start":{"line":122,"column":1},"end":{"line":122,"column":1}},"key":"OklsvZtcbG"}],"urlSource":"https://numpy.org/devdocs/user/basics.io.genfromtxt.html","key":"WpT2GfHmxP"},{"type":"text","value":".","position":{"start":{"line":122,"column":1},"end":{"line":122,"column":1}},"key":"E505SBcKqI"}],"key":"pVzM93YHfj"}],"key":"gZnhuuEOUg"},{"type":"block","position":{"start":{"line":124,"column":1},"end":{"line":124,"column":1}},"children":[{"type":"heading","depth":2,"position":{"start":{"line":126,"column":1},"end":{"line":126,"column":1}},"children":[{"type":"text","value":"Exploring the data","position":{"start":{"line":126,"column":1},"end":{"line":126,"column":1}},"key":"kA2LiS3nir"}],"identifier":"exploring-the-data","label":"Exploring the data","html_id":"exploring-the-data","implicit":true,"key":"frsVazvCIp"},{"type":"paragraph","position":{"start":{"line":128,"column":1},"end":{"line":128,"column":1}},"children":[{"type":"text","value":"First of all, we can plot the whole set of data we have and see what it looks like. In order to get a readable plot, we select only a few of the dates to show in our ","position":{"start":{"line":128,"column":1},"end":{"line":128,"column":1}},"key":"F6ErWQVV8r"},{"type":"link","url":"https://matplotlib.org/api/_as_gen/matplotlib.pyplot.xticks.html#matplotlib.pyplot.xticks","position":{"start":{"line":128,"column":1},"end":{"line":128,"column":1}},"children":[{"type":"text","value":"x-axis ticks","position":{"start":{"line":128,"column":1},"end":{"line":128,"column":1}},"key":"VML84UJxyj"}],"urlSource":"https://matplotlib.org/api/_as_gen/matplotlib.pyplot.xticks.html#matplotlib.pyplot.xticks","key":"uips2aBBB9"},{"type":"text","value":". Note also that in our plot command, we use ","position":{"start":{"line":128,"column":1},"end":{"line":128,"column":1}},"key":"Fz3U3M4RGA"},{"type":"inlineCode","value":"nbcases.T","position":{"start":{"line":128,"column":1},"end":{"line":128,"column":1}},"key":"S8Ez5EDEx8"},{"type":"text","value":" (the transpose of the ","position":{"start":{"line":128,"column":1},"end":{"line":128,"column":1}},"key":"BtccMTFSWZ"},{"type":"inlineCode","value":"nbcases","position":{"start":{"line":128,"column":1},"end":{"line":128,"column":1}},"key":"LuhUZstbSp"},{"type":"text","value":" array) since this means we will plot each row of the file as a separate line. We choose to plot a dashed line (using the ","position":{"start":{"line":128,"column":1},"end":{"line":128,"column":1}},"key":"n1epQSdndu"},{"type":"inlineCode","value":"'--'","position":{"start":{"line":128,"column":1},"end":{"line":128,"column":1}},"key":"ZkKNoyPQpY"},{"type":"text","value":" line style). See the ","position":{"start":{"line":128,"column":1},"end":{"line":128,"column":1}},"key":"R0zj545DXo"},{"type":"link","url":"https://matplotlib.org/","position":{"start":{"line":128,"column":1},"end":{"line":128,"column":1}},"children":[{"type":"text","value":"matplotlib","position":{"start":{"line":128,"column":1},"end":{"line":128,"column":1}},"key":"q9XsoiZElW"}],"urlSource":"https://matplotlib.org/","key":"NhJryfroT2"},{"type":"text","value":" documentation for more info on this.","position":{"start":{"line":128,"column":1},"end":{"line":128,"column":1}},"key":"UjSvnj3iIr"}],"key":"uNo073oXlt"}],"key":"IUFfEfYQ9d"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import matplotlib.pyplot as plt\n\nselected_dates = [0, 3, 11, 13]\nplt.plot(dates, nbcases.T, \"--\")\nplt.xticks(selected_dates, dates[selected_dates])\nplt.title(\"COVID-19 cumulative cases from Jan 21 to Feb 3 2020\")","key":"Fym8ztIMWy"},{"type":"outputs","id":"6n3Vrkdop542WCjoBEocK","children":[{"type":"output","children":[],"jupyter_data":{"output_type":"display_data","metadata":{},"data":{"text/plain":{"content":"\u003cFigure size 640x480 with 1 Axes\u003e","content_type":"text/plain"},"image/png":{"content_type":"image/png","hash":"d08c79eba17c823037f90ad9c9ac2cc1","path":"/numpy-tutorials/build/d08c79eba17c823037f90ad9c9ac2cc1.png"}}},"key":"DpUv7NDAc0"}],"key":"AErYG04C4i"}],"key":"PS39mDbr07"},{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":139,"column":1},"end":{"line":139,"column":1}},"children":[{"type":"text","value":"The graph has a strange shape from January 24th to February 1st. It would be interesting to know where this data comes from. If we look at the ","position":{"start":{"line":139,"column":1},"end":{"line":139,"column":1}},"key":"bNxy4oF5Ah"},{"type":"inlineCode","value":"locations","position":{"start":{"line":139,"column":1},"end":{"line":139,"column":1}},"key":"PHPwx36U3z"},{"type":"text","value":" array we extracted from the ","position":{"start":{"line":139,"column":1},"end":{"line":139,"column":1}},"key":"IX25i9zIkP"},{"type":"inlineCode","value":".csv","position":{"start":{"line":139,"column":1},"end":{"line":139,"column":1}},"key":"XMgCI6R53H"},{"type":"text","value":" file, we can see that we have two columns, where the first would contain regions and the second would contain the name of the country. However, only the first few rows contain data for the the first column (province names in China). Following that, we only have country names. So it would make sense to group all the data from China into a single row. For this, we’ll select from the ","position":{"start":{"line":139,"column":1},"end":{"line":139,"column":1}},"key":"qCFKvUh9tV"},{"type":"inlineCode","value":"nbcases","position":{"start":{"line":139,"column":1},"end":{"line":139,"column":1}},"key":"DzmKf2QTJD"},{"type":"text","value":" array only the rows for which the second entry of the ","position":{"start":{"line":139,"column":1},"end":{"line":139,"column":1}},"key":"zVxTlvgV96"},{"type":"inlineCode","value":"locations","position":{"start":{"line":139,"column":1},"end":{"line":139,"column":1}},"key":"xzigCbP3DJ"},{"type":"text","value":" array corresponds to China. Next, we’ll use the ","position":{"start":{"line":139,"column":1},"end":{"line":139,"column":1}},"key":"ovTO9rOeTz"},{"type":"link","url":"https://numpy.org/devdocs/reference/generated/numpy.sum.html#numpy.sum","position":{"start":{"line":139,"column":1},"end":{"line":139,"column":1}},"children":[{"type":"text","value":"numpy.sum","position":{"start":{"line":139,"column":1},"end":{"line":139,"column":1}},"key":"MpIPd1vGTV"}],"urlSource":"https://numpy.org/devdocs/reference/generated/numpy.sum.html#numpy.sum","key":"UckNQxphvb"},{"type":"text","value":" function to sum all the selected rows (","position":{"start":{"line":139,"column":1},"end":{"line":139,"column":1}},"key":"nolwArI1HN"},{"type":"inlineCode","value":"axis=0","position":{"start":{"line":139,"column":1},"end":{"line":139,"column":1}},"key":"R3jBwABxTb"},{"type":"text","value":"). Note also that row 35 corresponds to the total counts for the whole country for each date. Since we want to calculate the sum ourselves from the provinces data, we have to remove that row first from both ","position":{"start":{"line":139,"column":1},"end":{"line":139,"column":1}},"key":"FOdrVJJ1EF"},{"type":"inlineCode","value":"locations","position":{"start":{"line":139,"column":1},"end":{"line":139,"column":1}},"key":"iQTRuLRWJ3"},{"type":"text","value":" and ","position":{"start":{"line":139,"column":1},"end":{"line":139,"column":1}},"key":"YcARhdVT7c"},{"type":"inlineCode","value":"nbcases","position":{"start":{"line":139,"column":1},"end":{"line":139,"column":1}},"key":"fx8JhgkpGV"},{"type":"text","value":":","position":{"start":{"line":139,"column":1},"end":{"line":139,"column":1}},"key":"opaRq5lK67"}],"key":"UikXubBBQH"}],"key":"T7oomOHfiM"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"totals_row = 35\nlocations = np.delete(locations, (totals_row), axis=0)\nnbcases = np.delete(nbcases, (totals_row), axis=0)\n\nchina_total = nbcases[locations[:, 1] == \"China\"].sum(axis=0)\nchina_total","key":"wvDElUKhFC"},{"type":"outputs","id":"g6-23AQFN8TyyGTtuQpaQ","children":[{"type":"output","children":[],"jupyter_data":{"output_type":"execute_result","execution_count":4,"metadata":{},"data":{"text/plain":{"content":"array([  247,   288,   556,   817,   -22,   -22,   -15,   -10,    -9,\n          -7,    -4, 11820, 14410, 17237])","content_type":"text/plain"}}},"key":"EdSCjKXYDk"}],"key":"UybtGwhd5k"}],"key":"Yd7CsM7FiQ"},{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":150,"column":1},"end":{"line":150,"column":1}},"children":[{"type":"text","value":"Something’s wrong with this data - we are not supposed to have negative values in a cumulative data set. What’s going on?","position":{"start":{"line":150,"column":1},"end":{"line":150,"column":1}},"key":"EATtcaoNkg"}],"key":"mbPedXgi9h"}],"key":"fUbaAh0Vhy"},{"type":"block","position":{"start":{"line":152,"column":1},"end":{"line":152,"column":1}},"children":[{"type":"heading","depth":2,"position":{"start":{"line":154,"column":1},"end":{"line":154,"column":1}},"children":[{"type":"text","value":"Missing data","position":{"start":{"line":154,"column":1},"end":{"line":154,"column":1}},"key":"SOzHQmd5pO"}],"identifier":"missing-data","label":"Missing data","html_id":"missing-data","implicit":true,"key":"V8WhoszJzK"},{"type":"paragraph","position":{"start":{"line":156,"column":1},"end":{"line":156,"column":1}},"children":[{"type":"text","value":"Looking at the data, here’s what we find: there is a period with ","position":{"start":{"line":156,"column":1},"end":{"line":156,"column":1}},"key":"wKP4podbrd"},{"type":"strong","position":{"start":{"line":156,"column":1},"end":{"line":156,"column":1}},"children":[{"type":"text","value":"missing data","position":{"start":{"line":156,"column":1},"end":{"line":156,"column":1}},"key":"yHtd1A4ACL"}],"key":"rAtLbyfRkn"},{"type":"text","value":":","position":{"start":{"line":156,"column":1},"end":{"line":156,"column":1}},"key":"qxFznpadbl"}],"key":"ZhXcNqlCqI"}],"key":"VjaXhQ1Q4w"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"nbcases","key":"CESxwU86xS"},{"type":"outputs","id":"rpeniSlgBICu6rZ7VvUfI","children":[{"type":"output","children":[],"jupyter_data":{"output_type":"execute_result","execution_count":5,"metadata":{},"data":{"text/plain":{"content":"array([[  258,   270,   375, ...,  7153,  9074, 11177],\n       [   14,    17,    26, ...,   520,   604,   683],\n       [   -1,     1,     1, ...,   422,   493,   566],\n       ...,\n       [   -1,    -1,    -1, ...,    -1,    -1,    -1],\n       [   -1,    -1,    -1, ...,    -1,    -1,    -1],\n       [   -1,    -1,    -1, ...,    -1,    -1,    -1]], shape=(263, 14))","content_type":"text/plain"}}},"key":"Ry6j1pRPu5"}],"key":"sgTJ3pNuRn"}],"key":"fYtnztE8ER"},{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":162,"column":1},"end":{"line":163,"column":1}},"children":[{"type":"text","value":"All the ","position":{"start":{"line":162,"column":1},"end":{"line":162,"column":1}},"key":"atPZvFgOCH"},{"type":"inlineCode","value":"-1","position":{"start":{"line":162,"column":1},"end":{"line":162,"column":1}},"key":"NkhfaHgyru"},{"type":"text","value":" values we are seeing come from ","position":{"start":{"line":162,"column":1},"end":{"line":162,"column":1}},"key":"od1UnrgkCW"},{"type":"inlineCode","value":"numpy.genfromtxt","position":{"start":{"line":162,"column":1},"end":{"line":162,"column":1}},"key":"VbkMt7cP3o"},{"type":"text","value":" attempting to read missing data from the original ","position":{"start":{"line":162,"column":1},"end":{"line":162,"column":1}},"key":"s1tS0f30D6"},{"type":"inlineCode","value":".csv","position":{"start":{"line":162,"column":1},"end":{"line":162,"column":1}},"key":"trU11ceFd5"},{"type":"text","value":" file. Obviously, we\ndon’t want to compute missing data as ","position":{"start":{"line":162,"column":1},"end":{"line":162,"column":1}},"key":"PCYQbxZOC5"},{"type":"inlineCode","value":"-1","position":{"start":{"line":162,"column":1},"end":{"line":162,"column":1}},"key":"Qo9uvAxO7b"},{"type":"text","value":" - we just want to skip this value so it doesn’t interfere in our analysis. After importing the ","position":{"start":{"line":162,"column":1},"end":{"line":162,"column":1}},"key":"seeJzRMimp"},{"type":"inlineCode","value":"numpy.ma","position":{"start":{"line":162,"column":1},"end":{"line":162,"column":1}},"key":"uWValeKc2p"},{"type":"text","value":" module, we’ll create a new array, this time masking the invalid values:","position":{"start":{"line":162,"column":1},"end":{"line":162,"column":1}},"key":"OXV3hXeC9V"}],"key":"vOHnlnkdQB"}],"key":"NqoSYtbuo4"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from numpy import ma\n\nnbcases_ma = ma.masked_values(nbcases, -1)","key":"uAEmuVBTqf"},{"type":"outputs","id":"bdwI5FBu7eIpzA29cNWpu","children":[],"key":"dr6D3yfIW5"}],"key":"JAQXlTCQBi"},{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":171,"column":1},"end":{"line":171,"column":1}},"children":[{"type":"text","value":"If we look at the ","position":{"start":{"line":171,"column":1},"end":{"line":171,"column":1}},"key":"KfVVhrOAPa"},{"type":"inlineCode","value":"nbcases_ma","position":{"start":{"line":171,"column":1},"end":{"line":171,"column":1}},"key":"eBpyEk1QA2"},{"type":"text","value":" masked array, this is what we have:","position":{"start":{"line":171,"column":1},"end":{"line":171,"column":1}},"key":"Su6JHAKcY8"}],"key":"iZdyuCAmaD"}],"key":"aa34mNcn6w"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"nbcases_ma","key":"ER7qxWh6AD"},{"type":"outputs","id":"AOqrLw5byAWpHKdlBM0Hi","children":[{"type":"output","children":[],"jupyter_data":{"output_type":"execute_result","execution_count":7,"metadata":{},"data":{"text/plain":{"content":"masked_array(\n  data=[[258, 270, 375, ..., 7153, 9074, 11177],\n        [14, 17, 26, ..., 520, 604, 683],\n        [--, 1, 1, ..., 422, 493, 566],\n        ...,\n        [--, --, --, ..., --, --, --],\n        [--, --, --, ..., --, --, --],\n        [--, --, --, ..., --, --, --]],\n  mask=[[False, False, False, ..., False, False, False],\n        [False, False, False, ..., False, False, False],\n        [ True, False, False, ..., False, False, False],\n        ...,\n        [ True,  True,  True, ...,  True,  True,  True],\n        [ True,  True,  True, ...,  True,  True,  True],\n        [ True,  True,  True, ...,  True,  True,  True]],\n  fill_value=-1)","content_type":"text/plain"}}},"key":"K9ia2ZZGeA"}],"key":"KXjbXopt4u"}],"key":"IBrvIhGvmH"},{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":177,"column":1},"end":{"line":178,"column":1}},"children":[{"type":"text","value":"We can see that this is a different kind of array. As mentioned in the introduction, it has three attributes (","position":{"start":{"line":177,"column":1},"end":{"line":177,"column":1}},"key":"aPlotvcLNN"},{"type":"inlineCode","value":"data","position":{"start":{"line":177,"column":1},"end":{"line":177,"column":1}},"key":"IrZYgQcy1Z"},{"type":"text","value":", ","position":{"start":{"line":177,"column":1},"end":{"line":177,"column":1}},"key":"qY3itlb8Xv"},{"type":"inlineCode","value":"mask","position":{"start":{"line":177,"column":1},"end":{"line":177,"column":1}},"key":"CDkN8jB8xT"},{"type":"text","value":" and ","position":{"start":{"line":177,"column":1},"end":{"line":177,"column":1}},"key":"Km23jDLzjo"},{"type":"inlineCode","value":"fill_value","position":{"start":{"line":177,"column":1},"end":{"line":177,"column":1}},"key":"noESdQvDE3"},{"type":"text","value":").\nKeep in mind that the ","position":{"start":{"line":177,"column":1},"end":{"line":177,"column":1}},"key":"j2H8VlXm88"},{"type":"inlineCode","value":"mask","position":{"start":{"line":177,"column":1},"end":{"line":177,"column":1}},"key":"bhjNEVbtIa"},{"type":"text","value":" attribute has a ","position":{"start":{"line":177,"column":1},"end":{"line":177,"column":1}},"key":"hEYcLMvohd"},{"type":"inlineCode","value":"True","position":{"start":{"line":177,"column":1},"end":{"line":177,"column":1}},"key":"tcnA4zKRXu"},{"type":"text","value":" value for elements corresponding to ","position":{"start":{"line":177,"column":1},"end":{"line":177,"column":1}},"key":"quwOuXzaY5"},{"type":"strong","position":{"start":{"line":177,"column":1},"end":{"line":177,"column":1}},"children":[{"type":"text","value":"invalid","position":{"start":{"line":177,"column":1},"end":{"line":177,"column":1}},"key":"drSFcFh7ZG"}],"key":"I95CF17NmP"},{"type":"text","value":" data (represented by two dashes in the ","position":{"start":{"line":177,"column":1},"end":{"line":177,"column":1}},"key":"imiydg2fdg"},{"type":"inlineCode","value":"data","position":{"start":{"line":177,"column":1},"end":{"line":177,"column":1}},"key":"QNPpKqVTx3"},{"type":"text","value":" attribute).","position":{"start":{"line":177,"column":1},"end":{"line":177,"column":1}},"key":"oj1W8FNuZL"}],"key":"y1UtHDvDlj"}],"key":"SxC3y34uIg"},{"type":"block","position":{"start":{"line":180,"column":1},"end":{"line":180,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":182,"column":1},"end":{"line":183,"column":1}},"children":[{"type":"text","value":"Let’s try and see what the data looks like excluding the first row (data from the Hubei province in China) so we can look at the missing data more\nclosely:","position":{"start":{"line":182,"column":1},"end":{"line":182,"column":1}},"key":"axzCSEFdOT"}],"key":"ez4INlFcNI"}],"key":"H91f0X7gRW"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"plt.plot(dates, nbcases_ma[1:].T, \"--\")\nplt.xticks(selected_dates, dates[selected_dates])\nplt.title(\"COVID-19 cumulative cases from Jan 21 to Feb 3 2020\")","key":"MyvpUX5onT"},{"type":"outputs","id":"f1kefjpST10xYh-M5e-EI","children":[{"type":"output","children":[],"jupyter_data":{"output_type":"display_data","metadata":{},"data":{"text/plain":{"content":"\u003cFigure size 640x480 with 1 Axes\u003e","content_type":"text/plain"},"image/png":{"content_type":"image/png","hash":"613f065b167d8d181b5dc5e1173b74db","path":"/numpy-tutorials/build/613f065b167d8d181b5dc5e1173b74db.png"}}},"key":"cnV9wIjtLA"}],"key":"AUnP377rVA"}],"key":"A6R8BZxm2G"},{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":191,"column":1},"end":{"line":191,"column":1}},"children":[{"type":"text","value":"Now that our data has been masked, let’s try summing up all the cases in China:","position":{"start":{"line":191,"column":1},"end":{"line":191,"column":1}},"key":"SI1ad74vqN"}],"key":"DicmXLuY7D"}],"key":"cY9w1yv0f5"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"china_masked = nbcases_ma[locations[:, 1] == \"China\"].sum(axis=0)\nchina_masked","key":"XO9bmE0Rpw"},{"type":"outputs","id":"gOhZxkBDrkDFtNkHV2r9j","children":[{"type":"output","children":[],"jupyter_data":{"output_type":"execute_result","execution_count":9,"metadata":{},"data":{"text/plain":{"content":"masked_array(data=[278, 309, 574, 835, 10, 10, 17, 22, 23, 25, 28, 11821,\n                   14411, 17238],\n             mask=[False, False, False, False, False, False, False, False,\n                   False, False, False, False, False, False],\n       fill_value=999999)","content_type":"text/plain"}}},"key":"wR5NV6O7US"}],"key":"QiZ32QAoAW"}],"key":"FGtH702uvO"},{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":198,"column":1},"end":{"line":198,"column":1}},"children":[{"type":"text","value":"Note that ","position":{"start":{"line":198,"column":1},"end":{"line":198,"column":1}},"key":"lR8u06ONVj"},{"type":"inlineCode","value":"china_masked","position":{"start":{"line":198,"column":1},"end":{"line":198,"column":1}},"key":"FEyrl2RzV3"},{"type":"text","value":" is a masked array, so it has a different data structure than a regular NumPy array. Now, we can access its data directly by using the ","position":{"start":{"line":198,"column":1},"end":{"line":198,"column":1}},"key":"yXBwpC5aGK"},{"type":"inlineCode","value":".data","position":{"start":{"line":198,"column":1},"end":{"line":198,"column":1}},"key":"XuspalrdOf"},{"type":"text","value":" attribute:","position":{"start":{"line":198,"column":1},"end":{"line":198,"column":1}},"key":"t7JMJwkDRY"}],"key":"EbyppJz1uP"}],"key":"Ctem5hJoVB"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"china_total = china_masked.data\nchina_total","key":"onTVeJ7hRo"},{"type":"outputs","id":"O4EZht9YgIcnJ3RGN6ZBX","children":[{"type":"output","children":[],"jupyter_data":{"output_type":"execute_result","execution_count":10,"metadata":{},"data":{"text/plain":{"content":"array([  278,   309,   574,   835,    10,    10,    17,    22,    23,\n          25,    28, 11821, 14411, 17238])","content_type":"text/plain"}}},"key":"I8emsSsafV"}],"key":"DJQ10bNZcI"}],"key":"A7kpzLuDXr"},{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":205,"column":1},"end":{"line":205,"column":1}},"children":[{"type":"text","value":"That is better: no more negative values. However, we can still see that for some days, the cumulative number of cases seems to go down (from 835 to 10, for example), which does not agree with the definition of “cumulative data”. If we look more closely at the data, we can see that in the period where there was missing data in mainland China, there was valid data for Hong Kong, Taiwan, Macau and “Unspecified” regions of China. Maybe we can remove those from the total sum of cases in China, to get a better understanding of the data.","position":{"start":{"line":205,"column":1},"end":{"line":205,"column":1}},"key":"wBivUWiv2H"}],"key":"KExr2L9tMP"},{"type":"paragraph","position":{"start":{"line":207,"column":1},"end":{"line":207,"column":1}},"children":[{"type":"text","value":"First, we’ll identify the indices of locations in mainland China:","position":{"start":{"line":207,"column":1},"end":{"line":207,"column":1}},"key":"EKEwwjzEcX"}],"key":"c9vosUTxnl"}],"key":"WKEKas0bOy"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"china_mask = (\n    (locations[:, 1] == \"China\")\n    \u0026 (locations[:, 0] != \"Hong Kong\")\n    \u0026 (locations[:, 0] != \"Taiwan\")\n    \u0026 (locations[:, 0] != \"Macau\")\n    \u0026 (locations[:, 0] != \"Unspecified*\")\n)","key":"dcXHjMXOS7"},{"type":"outputs","id":"JFTw-6B9xaEu7hoNMg14F","children":[],"key":"g5EGV08i6K"}],"key":"hMMI0u2QQX"},{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":219,"column":1},"end":{"line":219,"column":1}},"children":[{"type":"text","value":"Now, ","position":{"start":{"line":219,"column":1},"end":{"line":219,"column":1}},"key":"s1ITRQvFMq"},{"type":"inlineCode","value":"china_mask","position":{"start":{"line":219,"column":1},"end":{"line":219,"column":1}},"key":"nrfpBC7MCP"},{"type":"text","value":" is an array of boolean values (","position":{"start":{"line":219,"column":1},"end":{"line":219,"column":1}},"key":"otgw2yMQLc"},{"type":"inlineCode","value":"True","position":{"start":{"line":219,"column":1},"end":{"line":219,"column":1}},"key":"bUCcDXCeJw"},{"type":"text","value":" or ","position":{"start":{"line":219,"column":1},"end":{"line":219,"column":1}},"key":"X3QX4TrCmT"},{"type":"inlineCode","value":"False","position":{"start":{"line":219,"column":1},"end":{"line":219,"column":1}},"key":"qQiapcTJ0n"},{"type":"text","value":"); we can check that the indices are what we wanted with the ","position":{"start":{"line":219,"column":1},"end":{"line":219,"column":1}},"key":"zF5AzOjwOj"},{"type":"link","url":"https://numpy.org/devdocs/reference/generated/numpy.ma.nonzero.html#numpy.ma.nonzero","position":{"start":{"line":219,"column":1},"end":{"line":219,"column":1}},"children":[{"type":"text","value":"ma.nonzero","position":{"start":{"line":219,"column":1},"end":{"line":219,"column":1}},"key":"HiNicwB8gX"}],"urlSource":"https://numpy.org/devdocs/reference/generated/numpy.ma.nonzero.html#numpy.ma.nonzero","key":"J2xsOcZfkM"},{"type":"text","value":" method for masked arrays:","position":{"start":{"line":219,"column":1},"end":{"line":219,"column":1}},"key":"SFyMKBkLel"}],"key":"a5ak3pb63K"}],"key":"kuY9GAq447"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"china_mask.nonzero()","key":"Cv8AaEFRmy"},{"type":"outputs","id":"_CV2A6kX6x3Pu1LoJb1de","children":[{"type":"output","children":[],"jupyter_data":{"output_type":"execute_result","execution_count":12,"metadata":{},"data":{"text/plain":{"content":"(array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16,\n        17, 18, 19, 20, 21, 22, 23, 25, 26, 27, 28, 29, 31, 33]),)","content_type":"text/plain"}}},"key":"Bt58KSZ4vx"}],"key":"NtLm7JmuEm"}],"key":"ksgk4bDx3p"},{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":225,"column":1},"end":{"line":225,"column":1}},"children":[{"type":"text","value":"Now we can correctly sum entries for mainland China:","position":{"start":{"line":225,"column":1},"end":{"line":225,"column":1}},"key":"VrUnuM9vA2"}],"key":"R3R3bBoDmR"}],"key":"nHhpc3PtP9"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"china_total = nbcases_ma[china_mask].sum(axis=0)\nchina_total","key":"lf6vneGSGK"},{"type":"outputs","id":"Jq8qrd-I-Bi44P7rkfLJi","children":[{"type":"output","children":[],"jupyter_data":{"output_type":"execute_result","execution_count":13,"metadata":{},"data":{"text/plain":{"content":"masked_array(data=[278, 308, 440, 446, --, --, --, --, --, --, --, 11791,\n                   14380, 17205],\n             mask=[False, False, False, False,  True,  True,  True,  True,\n                    True,  True,  True, False, False, False],\n       fill_value=999999)","content_type":"text/plain"}}},"key":"G1ZSdMs5mk"}],"key":"Iqqgo9NaVM"}],"key":"Ys9v185z6X"},{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":232,"column":1},"end":{"line":232,"column":1}},"children":[{"type":"text","value":"We can replace the data with this information and plot a new graph, focusing on Mainland China:","position":{"start":{"line":232,"column":1},"end":{"line":232,"column":1}},"key":"Q2hyHyIxft"}],"key":"nQm5iEpyUl"}],"key":"R2tA87t8UB"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"plt.plot(dates, china_total.T, \"--\")\nplt.xticks(selected_dates, dates[selected_dates])\nplt.title(\"COVID-19 cumulative cases from Jan 21 to Feb 3 2020 - Mainland China\")","key":"GNYcGrARPT"},{"type":"outputs","id":"kYU3O_5nSwri4pql43P1s","children":[{"type":"output","children":[],"jupyter_data":{"output_type":"display_data","metadata":{},"data":{"text/plain":{"content":"\u003cFigure size 640x480 with 1 Axes\u003e","content_type":"text/plain"},"image/png":{"content_type":"image/png","hash":"9c07c4f86dd02b243a8eec9094bc14fc","path":"/numpy-tutorials/build/9c07c4f86dd02b243a8eec9094bc14fc.png"}}},"key":"EvdBoGvXnr"}],"key":"e43iy2Z7aH"}],"key":"tzb8g5jjng"},{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":240,"column":1},"end":{"line":240,"column":1}},"children":[{"type":"text","value":"It’s clear that masked arrays are the right solution here. We cannot represent the missing data without mischaracterizing the evolution of the curve.","position":{"start":{"line":240,"column":1},"end":{"line":240,"column":1}},"key":"bO9kuxuo1Y"}],"key":"nwAYzs0llA"}],"key":"bKX3uFz3D2"},{"type":"block","position":{"start":{"line":242,"column":1},"end":{"line":242,"column":1}},"children":[{"type":"heading","depth":2,"position":{"start":{"line":244,"column":1},"end":{"line":244,"column":1}},"children":[{"type":"text","value":"Fitting Data","position":{"start":{"line":244,"column":1},"end":{"line":244,"column":1}},"key":"WXIHf5YlI3"}],"identifier":"fitting-data","label":"Fitting Data","html_id":"fitting-data","implicit":true,"key":"tZ51bMQftc"},{"type":"paragraph","position":{"start":{"line":246,"column":1},"end":{"line":246,"column":1}},"children":[{"type":"text","value":"One possibility we can think of is to interpolate the missing data to estimate the number of cases in late January. Observe that we can select the masked elements using the ","position":{"start":{"line":246,"column":1},"end":{"line":246,"column":1}},"key":"ohP35X398p"},{"type":"inlineCode","value":".mask","position":{"start":{"line":246,"column":1},"end":{"line":246,"column":1}},"key":"cKUZdvMMOQ"},{"type":"text","value":" attribute:","position":{"start":{"line":246,"column":1},"end":{"line":246,"column":1}},"key":"T2Dm9dP2i3"}],"key":"WRIpzADg13"}],"key":"yNVPOpQyJJ"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"china_total.mask\ninvalid = china_total[china_total.mask]\ninvalid","key":"kvLn9P0Wqy"},{"type":"outputs","id":"Dl64KRpvv41PHkIXbk3pI","children":[{"type":"output","children":[],"jupyter_data":{"output_type":"execute_result","execution_count":15,"metadata":{},"data":{"text/plain":{"content":"masked_array(data=[--, --, --, --, --, --, --],\n             mask=[ True,  True,  True,  True,  True,  True,  True],\n       fill_value=999999,\n            dtype=int64)","content_type":"text/plain"}}},"key":"C5vcaoK68m"}],"key":"LPm6quAoRv"}],"key":"MLK0YybX2R"},{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":254,"column":1},"end":{"line":254,"column":1}},"children":[{"type":"text","value":"We can also access the valid entries by using the logical negation for this mask:","position":{"start":{"line":254,"column":1},"end":{"line":254,"column":1}},"key":"CYLI5JEoCv"}],"key":"S07OLN60NS"}],"key":"NaYBkTe5Oy"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"valid = china_total[~china_total.mask]\nvalid","key":"T170Ui771g"},{"type":"outputs","id":"_4tcoXMWV7WuSvYX089-M","children":[{"type":"output","children":[],"jupyter_data":{"output_type":"execute_result","execution_count":16,"metadata":{},"data":{"text/plain":{"content":"masked_array(data=[278, 308, 440, 446, 11791, 14380, 17205],\n             mask=[False, False, False, False, False, False, False],\n       fill_value=999999)","content_type":"text/plain"}}},"key":"jA3JODfApq"}],"key":"wqM4L9kmOT"}],"key":"EwzIgCLeAL"},{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"children":[{"type":"text","value":"Now, if we want to create a very simple approximation for this data, we should take into account the valid entries around the invalid ones. So first let’s select the dates for which the data is valid. Note that we can use the mask from the ","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"key":"dwFExLvsen"},{"type":"inlineCode","value":"china_total","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"key":"DIVAaTtysD"},{"type":"text","value":" masked array to index the dates array:","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"key":"Qq4qEuY8Uc"}],"key":"d44NOGYH68"}],"key":"mwCGfVtyli"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"dates[~china_total.mask]","key":"PQ324ds54i"},{"type":"outputs","id":"1pJwmzRvAzq3WTH1NkUqS","children":[{"type":"output","children":[],"jupyter_data":{"output_type":"execute_result","execution_count":17,"metadata":{},"data":{"text/plain":{"content":"array(['1/21/20', '1/22/20', '1/23/20', '1/24/20', '2/1/20', '2/2/20',\n       '2/3/20'], dtype='\u003cU7')","content_type":"text/plain"}}},"key":"DQ9QTxQQZo"}],"key":"nNtJtVjeWi"}],"key":"iYhdJo0AiR"},{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":267,"column":1},"end":{"line":269,"column":1}},"children":[{"type":"text","value":"Finally, we can use the\n","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"key":"umHqHgoNTl"},{"type":"link","url":"https://numpy.org/doc/stable/reference/generated/numpy.polynomial.polynomial.Polynomial.fit.html","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"children":[{"type":"text","value":"fitting functionality of the numpy.polynomial","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"key":"nsXxbPREHG"}],"urlSource":"https://numpy.org/doc/stable/reference/generated/numpy.polynomial.polynomial.Polynomial.fit.html","key":"cPRF0uXqiu"},{"type":"text","value":"\npackage to create a cubic polynomial model that fits the data as best as possible:","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"key":"KViAcGQsFC"}],"key":"RdwL0eYWks"}],"key":"mP1aoJLyL3"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"t = np.arange(len(china_total))\nmodel = np.polynomial.Polynomial.fit(t[~china_total.mask], valid, deg=3)\nplt.plot(t, china_total)\nplt.plot(t, model(t), \"--\")","key":"wY6HiTg3Pm"},{"type":"outputs","id":"D5_Vp0qDlo9yT0ii5t_hK","children":[{"type":"output","children":[],"jupyter_data":{"output_type":"display_data","metadata":{},"data":{"text/plain":{"content":"\u003cFigure size 640x480 with 1 Axes\u003e","content_type":"text/plain"},"image/png":{"content_type":"image/png","hash":"705b0ce4ba67115fce959db22ca0f373","path":"/numpy-tutorials/build/705b0ce4ba67115fce959db22ca0f373.png"}}},"key":"iWRLRlLKDW"}],"key":"HeIdn2dYz5"}],"key":"n8WC5kfN8M"},{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":278,"column":1},"end":{"line":279,"column":1}},"children":[{"type":"text","value":"This plot is not so readable since the lines seem to be over each other, so let’s summarize in a more elaborate plot. We’ll plot the real data when\navailable, and show the cubic fit for unavailable data, using this fit to compute an estimate to the observed number of cases on January 28th 2020, 7 days after the beginning of the records:","position":{"start":{"line":278,"column":1},"end":{"line":278,"column":1}},"key":"aCgGJE9LzW"}],"key":"m4pUggtXVd"}],"key":"YTUSbZTrQo"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"plt.plot(t, china_total)\nplt.plot(t[china_total.mask], model(t)[china_total.mask], \"--\", color=\"orange\")\nplt.plot(7, model(7), \"r*\")\nplt.xticks([0, 7, 13], dates[[0, 7, 13]])\nplt.yticks([0, model(7), 10000, 17500])\nplt.legend([\"Mainland China\", \"Cubic estimate\", \"7 days after start\"])\nplt.title(\n    \"COVID-19 cumulative cases from Jan 21 to Feb 3 2020 - Mainland China\\n\"\n    \"Cubic estimate for 7 days after start\"\n)","key":"CtJqRXE2sS"},{"type":"outputs","id":"Q2YZj-CXjFaPf-GfgeCqJ","children":[{"type":"output","children":[],"jupyter_data":{"output_type":"display_data","metadata":{},"data":{"text/plain":{"content":"\u003cFigure size 640x480 with 1 Axes\u003e","content_type":"text/plain"},"image/png":{"content_type":"image/png","hash":"0af5964dc0b4e30f177f4bb98384bc83","path":"/numpy-tutorials/build/0af5964dc0b4e30f177f4bb98384bc83.png"}}},"key":"GLuklr20Yj"}],"key":"Lhy78Vqtmj"}],"key":"LA5gCXYBg8"},{"type":"block","children":[{"type":"heading","depth":2,"position":{"start":{"line":294,"column":1},"end":{"line":294,"column":1}},"children":[{"type":"text","value":"In practice","position":{"start":{"line":294,"column":1},"end":{"line":294,"column":1}},"key":"h0om8lL3ed"}],"identifier":"in-practice","label":"In practice","html_id":"in-practice","implicit":true,"key":"jchxESjUhx"}],"key":"g49B1AQrOJ"},{"type":"block","position":{"start":{"line":296,"column":1},"end":{"line":296,"column":1}},"children":[{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":298,"column":1},"end":{"line":299,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":298,"column":1},"end":{"line":299,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Adding ","position":{"start":{"line":298,"column":1},"end":{"line":298,"column":1}},"key":"rC3IDuuUoD"},{"type":"inlineCode","value":"-1","position":{"start":{"line":298,"column":1},"end":{"line":298,"column":1}},"key":"xOUj9oMUGj"},{"type":"text","value":" to missing data is not a problem with ","position":{"start":{"line":298,"column":1},"end":{"line":298,"column":1}},"key":"OGCXpFlCbx"},{"type":"inlineCode","value":"numpy.genfromtxt","position":{"start":{"line":298,"column":1},"end":{"line":298,"column":1}},"key":"HY9F6dhQlT"},{"type":"text","value":"; in this particular case, substituting the missing value with ","position":{"start":{"line":298,"column":1},"end":{"line":298,"column":1}},"key":"v4GeO2p8vK"},{"type":"inlineCode","value":"0","position":{"start":{"line":298,"column":1},"end":{"line":298,"column":1}},"key":"PU0z5s87vq"},{"type":"text","value":" might have been fine, but we’ll see later that this is far from a general solution. Also, it is possible to call the ","position":{"start":{"line":298,"column":1},"end":{"line":298,"column":1}},"key":"MoMyvJq6jv"},{"type":"inlineCode","value":"numpy.genfromtxt","position":{"start":{"line":298,"column":1},"end":{"line":298,"column":1}},"key":"aNV1WvzTea"},{"type":"text","value":" function using the ","position":{"start":{"line":298,"column":1},"end":{"line":298,"column":1}},"key":"ARzu3DcZke"},{"type":"inlineCode","value":"usemask","position":{"start":{"line":298,"column":1},"end":{"line":298,"column":1}},"key":"jbuF0b07v7"},{"type":"text","value":" parameter. If ","position":{"start":{"line":298,"column":1},"end":{"line":298,"column":1}},"key":"xtkyXT0HZS"},{"type":"inlineCode","value":"usemask=True","position":{"start":{"line":298,"column":1},"end":{"line":298,"column":1}},"key":"BWL5CujJuq"},{"type":"text","value":", ","position":{"start":{"line":298,"column":1},"end":{"line":298,"column":1}},"key":"uAxV2BFJ3h"},{"type":"inlineCode","value":"numpy.genfromtxt","position":{"start":{"line":298,"column":1},"end":{"line":298,"column":1}},"key":"CP91nmTqJ0"},{"type":"text","value":" automatically returns a masked array.","position":{"start":{"line":298,"column":1},"end":{"line":298,"column":1}},"key":"tgBezxGrV1"}],"key":"bh7qOzGnw5"}],"key":"ti2lBANP6e"}],"key":"WM3RyjZzD6"}],"key":"TxykvvV5W3"},{"type":"block","position":{"start":{"line":300,"column":1},"end":{"line":300,"column":1}},"children":[{"type":"heading","depth":2,"position":{"start":{"line":302,"column":1},"end":{"line":302,"column":1}},"children":[{"type":"text","value":"Further reading","position":{"start":{"line":302,"column":1},"end":{"line":302,"column":1}},"key":"sp1dPpOdDH"}],"identifier":"further-reading","label":"Further reading","html_id":"further-reading","implicit":true,"key":"EovajAbQ5f"},{"type":"paragraph","position":{"start":{"line":304,"column":1},"end":{"line":304,"column":1}},"children":[{"type":"text","value":"Topics not covered in this tutorial can be found in the documentation:","position":{"start":{"line":304,"column":1},"end":{"line":304,"column":1}},"key":"NtPufPgzAj"}],"key":"e71BSCzOkp"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":306,"column":1},"end":{"line":308,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":306,"column":1},"end":{"line":306,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"https://numpy.org/devdocs/reference/generated/numpy.ma.harden_mask.html#numpy.ma.harden_mask","position":{"start":{"line":306,"column":1},"end":{"line":306,"column":1}},"children":[{"type":"text","value":"Hardmasks","position":{"start":{"line":306,"column":1},"end":{"line":306,"column":1}},"key":"ZeUA6NS5Lw"}],"urlSource":"https://numpy.org/devdocs/reference/generated/numpy.ma.harden_mask.html#numpy.ma.harden_mask","key":"k60HW07WoE"},{"type":"text","value":" vs. ","position":{"start":{"line":306,"column":1},"end":{"line":306,"column":1}},"key":"I3vcVXj9S0"},{"type":"link","url":"https://numpy.org/devdocs/reference/generated/numpy.ma.soften_mask.html#numpy.ma.soften_mask","position":{"start":{"line":306,"column":1},"end":{"line":306,"column":1}},"children":[{"type":"text","value":"softmasks","position":{"start":{"line":306,"column":1},"end":{"line":306,"column":1}},"key":"Qd3HFwMH2C"}],"urlSource":"https://numpy.org/devdocs/reference/generated/numpy.ma.soften_mask.html#numpy.ma.soften_mask","key":"F4qZxQ5RJM"}],"key":"vNZQbK7lUk"}],"key":"RZgjRuQAEX"},{"type":"listItem","spread":true,"position":{"start":{"line":307,"column":1},"end":{"line":308,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"https://numpy.org/devdocs/reference/maskedarray.generic.html#maskedarray-generic","position":{"start":{"line":307,"column":1},"end":{"line":307,"column":1}},"children":[{"type":"text","value":"The numpy.ma module","position":{"start":{"line":307,"column":1},"end":{"line":307,"column":1}},"key":"i2Zez7OnEx"}],"urlSource":"https://numpy.org/devdocs/reference/maskedarray.generic.html#maskedarray-generic","key":"dVdqjGOyd5"}],"key":"R8zGxw4TZF"}],"key":"wkNauCenni"}],"key":"qGnulnUFUq"},{"type":"heading","depth":3,"position":{"start":{"line":309,"column":1},"end":{"line":309,"column":1}},"children":[{"type":"text","value":"Reference","position":{"start":{"line":309,"column":1},"end":{"line":309,"column":1}},"key":"xcaBmHN7TF"}],"identifier":"reference","label":"Reference","html_id":"reference","implicit":true,"key":"ljI9OqxKMl"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":311,"column":1},"end":{"line":311,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":311,"column":1},"end":{"line":311,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Ensheng Dong, Hongru Du, Lauren Gardner, ","position":{"start":{"line":311,"column":1},"end":{"line":311,"column":1}},"key":"q4OqEL8kCv"},{"type":"emphasis","position":{"start":{"line":311,"column":1},"end":{"line":311,"column":1}},"children":[{"type":"text","value":"An interactive web-based dashboard to track COVID-19 in real time","position":{"start":{"line":311,"column":1},"end":{"line":311,"column":1}},"key":"xiLO2WbAHO"}],"key":"If3y5dMdXJ"},{"type":"text","value":", The Lancet Infectious Diseases, Volume 20, Issue 5, 2020, Pages 533-534, ISSN 1473-3099, ","position":{"start":{"line":311,"column":1},"end":{"line":311,"column":1}},"key":"HcJE4w78vJ"},{"type":"cite","url":"https://doi.org/10.1016/S1473-3099(20)30120-1","position":{"start":{"line":311,"column":1},"end":{"line":311,"column":1}},"children":[{"type":"text","value":"Dong ","key":"nbAow4JWz6"},{"type":"emphasis","children":[{"type":"text","value":"et al.","key":"Yf4juUKDqI"}],"key":"qHmDrolA2K"},{"type":"text","value":" (2020)","key":"wQx4KGC5bI"}],"kind":"narrative","label":"Dong_2020","identifier":"https://doi.org/10.1016/S1473-3099(20)30120-1","enumerator":"1","key":"xk9VrrBbqJ"},{"type":"text","value":".","position":{"start":{"line":311,"column":1},"end":{"line":311,"column":1}},"key":"OfABYv3nIC"}],"key":"kS0dx2oLm8"}],"key":"BygaIvGP6X"}],"key":"pkEwdYt374"}],"key":"ruhen89aMl"}],"key":"HLk9z3bvSJ"},"references":{"cite":{"order":["Dong_2020"],"data":{"Dong_2020":{"label":"Dong_2020","enumerator":"1","doi":"10.1016/s1473-3099(20)30120-1","html":"Dong, E., Du, H., \u0026 Gardner, L. (2020). An interactive web-based dashboard to track COVID-19 in real time. \u003ci\u003eThe Lancet Infectious Diseases\u003c/i\u003e, \u003ci\u003e20\u003c/i\u003e(5), 533–534. \u003ca target=\"_blank\" rel=\"noreferrer\" href=\"https://doi.org/10.1016/s1473-3099(20)30120-1\"\u003e10.1016/s1473-3099(20)30120-1\u003c/a\u003e","url":"https://doi.org/10.1016/s1473-3099(20)30120-1"}}}},"footer":{"navigation":{"prev":{"title":"Saving and sharing your NumPy arrays","short_title":"Sharing Array Data","url":"/save-load-arrays","group":"Features"},"next":{"title":"Contributing","short_title":"Contributing","url":"/contributing","group":"Features"}}},"domain":"http://localhost:3000"},"project":{"title":"Numpy Tutorials","authors":[{"id":"Numpy Community","name":"Numpy Community"}],"github":"https://github.com/numpy/numpy-tutorials","toc":[{"file":"content/index.md"},{"children":[{"file":"content/mooreslaw-tutorial.md"},{"file":"content/tutorial-deep-learning-on-mnist.md"},{"file":"content/tutorial-x-ray-image-processing.md"},{"file":"content/tutorial-static_equilibrium.md"},{"file":"content/tutorial-plotting-fractals.md"},{"file":"content/tutorial-air-quality-analysis.md"}],"title":"Applications"},{"children":[{"file":"content/tutorial-svd.md"},{"file":"content/save-load-arrays.md"},{"file":"content/tutorial-ma.md"}],"title":"Features"},{"children":[{"file":"content/tutorial-style-guide.md"}],"file":"content/contributing.md","title":"Contributing"}],"thumbnail":"/numpy-tutorials/build/b77199e99a54e59b2e3c037c2cc90f21.svg","exports":[],"bibliography":[],"index":"index","pages":[{"level":1,"title":"Applications"},{"slug":"mooreslaw-tutorial","title":"Determining Moore’s Law with real data in NumPy","short_title":"Moore's Law","description":"","date":"","thumbnail":"/numpy-tutorials/build/01-mooreslaw-tutoria-b7ed0ec7045e43a575dc871f1d80ba79.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"tutorial-deep-learning-on-mnist","title":"Deep learning on MNIST","description":"","date":"","thumbnail":"/numpy-tutorials/build/tutorial-deep-learni-18c33a02a86a205d4dc00e618c78f2e1.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"tutorial-x-ray-image-processing","title":"X-ray image processing","description":"","date":"","thumbnail":"/numpy-tutorials/build/tutorial-x-ray-image-65a7be1124126ce5b284c9f07ce0d6ed.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"tutorial-static-equilibrium","title":"Determining Static Equilibrium in NumPy","short_title":"Static Equilibrium","description":"","date":"","thumbnail":"/numpy-tutorials/build/static_eqbm-fig01-02f515938c9167160a1aa8c0c979c840.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"tutorial-plotting-fractals","title":"Plotting Fractals","description":"","date":"","thumbnail":"/numpy-tutorials/build/fractal-05cf84dbcdf76b80fa747a06f861f631.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"tutorial-air-quality-analysis","title":"Analyzing the impact of the lockdown on air quality in Delhi, India","short_title":"Analyzing Air Quality","description":"","date":"","thumbnail":"/numpy-tutorials/build/11-delhi-aqi-719dde59d7502416fd089cc1a3ee750a.jpg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"level":1,"title":"Features"},{"slug":"tutorial-svd","title":"Linear algebra on n-dimensional arrays","short_title":"Linear Algebra on n-D arrays","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"save-load-arrays","title":"Saving and sharing your NumPy arrays","short_title":"Sharing Array Data","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"tutorial-ma","title":"Masked Arrays","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"contributing","title":"Contributing","short_title":"Contributing","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"tutorial-style-guide","title":"Learn to write a NumPy tutorial","short_title":"Style Guide","description":"","date":"","thumbnail":"/numpy-tutorials/build/56554e3d11983df8f484e8d7b2c2bdae.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2}]}}},"actionData":null,"errors":null},"future":{"unstable_dev":false,"unstable_postcss":false,"unstable_tailwind":false,"v2_errorBoundary":true,"v2_headers":true,"v2_meta":true,"v2_normalizeFormMethod":true,"v2_routeConvention":true}};</script><script type="module" async="">import "/numpy-tutorials/build/manifest-3595279D.js";
import * as route0 from "/numpy-tutorials/build/root-SIO6LUTY.js";
import * as route1 from "/numpy-tutorials/build/routes/$-PRP77N34.js";
window.__remixRouteModules = {"root":route0,"routes/$":route1};

import("/numpy-tutorials/build/entry.client-PCJPW7TK.js");</script></body></html>